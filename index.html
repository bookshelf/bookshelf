<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <link rel="icon" href="docs/images/favicon.ico" />
      <link rel="canonical" href="http://bookshelfjs.org" />
      <title>Bookshelf.js</title>
      <!--
      ._.                                                      ._.
      | |    ______             _        _          _  __      | |
      | |    | ___ \           | |      | |        | |/ _|     | |
      | |    | |_/ / ___   ___ | | _____| |__   ___| | |_      | |
      | |    | ___ \/ _ \ / _ \| |/ / __| '_ \ / _ \ |  _|     | |
      | |    | |_/ / (_) | (_) |   <\__ \ | | |  __/ | |       | |
      | |____\____/_\___/_\___/|_|\_\___/_|_|_|\___|_|_|_______| |
      |                                                          |
      \________\  /__________________________________\  /________/
                \/                                    \/
      -->
      <script src="docs/scripts/prettify/prettify.js"></script>
      <script src="docs/scripts/prettify/lang-css.js"></script>
      <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

      <!-- Import fonts from Open Font Library -->
      <link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/carlito" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/average-mono" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" media="screen" href="http://openfontlibrary.org/face/noto-serif" rel="stylesheet" type="text/css"/>
      <link rel="stylesheet" media="screen" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

      <link type="text/css" rel="stylesheet" href="docs/styles/main.css">
  </head>
  <body class="minami">

    <a class="fork-me" href="https://github.com/tgriesser/bookshelf">
      Fork me on GitHub
    </a>

    <!--
      Not sure what this is.

      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger" class="navicon-button x">
        <div class="navicon"></div>
      </label>

      <label for="nav-trigger" class="overlay"></label>
    -->

    <nav class="sidebar">
      <a href="index.html#">
  <header class="nav-header">
    <img class="nav-logo" src="docs/images/bookshelf-icon.svg" />
    <h1>Bookshelf.js</h1>
  </header>
</a>

      
        <ul class="readme"><li><h3><a href="#notice">Notice</a></h3></li>
<li><h3><a href="#introduction">Introduction</a></h3></li>
<li><h3><a href="#installation">Installation</a></h3></li>
<li><h3><a href="#examples">Examples</a></h3></li>
<li><h3><a href="#plugins">Plugins</a></h3></li>
<li><h3><a href="#community-plugins">Community plugins</a></h3></li>
<li><h3><a href="#support">Support</a></h3></li>
<li><h3><a href="#faq">F.A.Q.</a></h3></li></ul><ul class="changelog"><li><h3><a href="#changelog">Change log</a></h3></li></ul><ul class="main"><li><h3><a href="#associations">Associations</a></h3><ul class="sections"><li><a href="#one-to-one">One-to-one</a></li><li><a href="#one-to-many">One-to-many</a></li><li><a href="#many-to-many">Many-to-many</a></li><li><a href="#polymorphic">Polymorphic</a></li></ul></li><li><h3><a href="#tutorials">Tutorials</a></h3><ul class="sections"><li><a href="#parse-and-format">Parse and Format</a></li></ul></li><li><h3><a href="#section-Bookshelf">Bookshelf</a></h3><h4><a href="#Bookshelf-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Bookshelf">Bookshelf</a></li></ul><h4><a href="#Bookshelf-subsection-members">Members</a></h4><ul class="members"><li><a href="#Bookshelf-instance-knex">knex</a></li></ul><h4><a href="#Bookshelf-subsection-methods">Methods</a></h4><ul class="methods"><li><a href="#Bookshelf-instance-plugin">plugin</a></li><li><a href="#Bookshelf-instance-transaction">transaction</a></li></ul></li><li><h3><a href="#section-Model">Model</a></h3><h4><a href="#Model-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Model">Model</a></li><li><a href="#Model-instance-initialize">initialize</a></li></ul><h4><a href="#Model-subsection-static">Static</a></h4><ul class="static"><li><a href="#Model-static-collection">collection</a></li><li><a href="#Model-static-count">count</a></li><li><a href="#Model-static-extend">extend</a></li><li><a href="#Model-static-fetchAll">fetchAll</a></li><li><a href="#Model-static-forge">forge</a></li></ul><h4><a href="#Model-subsection-members">Members</a></h4><ul class="members"><li><a href="#Model-instance-defaults">defaults</a></li><li><a href="#Model-instance-hasTimestamps">hasTimestamps</a></li><li><a href="#Model-instance-idAttribute">idAttribute</a></li><li><a href="#Model-instance-processors">processors</a></li><li><a href="#Model-instance-tableName">tableName</a></li></ul><h4><a href="#Model-subsection-methods">Methods</a></h4><ul class="methods"><li><a href="#Model-instance-belongsTo">belongsTo</a></li><li><a href="#Model-instance-belongsToMany">belongsToMany</a></li><li><a href="#Model-instance-clear">clear</a></li><li><a href="#Model-instance-clone">clone</a></li><li><a href="#Model-instance-count">count</a></li><li><a href="#Model-instance-destroy">destroy</a></li><li><a href="#Model-instance-escape">escape</a></li><li><a href="#Model-instance-fetch">fetch</a></li><li><a href="#Model-instance-fetchAll">fetchAll</a></li><li><a href="#Model-instance-fetchPage">fetchPage</a></li><li><a href="#Model-instance-format">format</a></li><li><a href="#Model-instance-get">get</a></li><li><a href="#Model-instance-has">has</a></li><li><a href="#Model-instance-hasChanged">hasChanged</a></li><li><a href="#Model-instance-hasMany">hasMany</a></li><li><a href="#Model-instance-hasOne">hasOne</a></li><li><a href="#Model-instance-isNew">isNew</a></li><li><a href="#Model-instance-load">load</a></li><li><a href="#Model-instance-morphMany">morphMany</a></li><li><a href="#Model-instance-morphOne">morphOne</a></li><li><a href="#Model-instance-morphTo">morphTo</a></li><li><a href="#Model-instance-off">off</a></li><li><a href="#Model-instance-on">on</a></li><li><a href="#Model-instance-once">once</a></li><li><a href="#Model-instance-orderBy">orderBy</a></li><li><a href="#Model-instance-parse">parse</a></li><li><a href="#Model-instance-previous">previous</a></li><li><a href="#Model-instance-previousAttributes">previousAttributes</a></li><li><a href="#Model-instance-query">query</a></li><li><a href="#Model-instance-refresh">refresh</a></li><li><a href="#Model-instance-related">related</a></li><li><a href="#Model-instance-resetQuery">resetQuery</a></li><li><a href="#Model-instance-save">save</a></li><li><a href="#Model-instance-serialize">serialize</a></li><li><a href="#Model-instance-set">set</a></li><li><a href="#Model-instance-through">through</a></li><li><a href="#Model-instance-timestamp">timestamp</a></li><li><a href="#Model-instance-toJSON">toJSON</a></li><li><a href="#Model-instance-trigger">trigger</a></li><li><a href="#Model-instance-triggerThen">triggerThen</a></li><li><a href="#Model-instance-unset">unset</a></li><li><a href="#Model-instance-where">where</a></li></ul><h4><a href="#Model-subsection-lodash-methods">Lodash Methods</a></h4><ul class="lodash-methods"><li><a href="#Model-instance-invert">invert</a></li><li><a href="#Model-instance-keys">keys</a></li><li><a href="#Model-instance-omit">omit</a></li><li><a href="#Model-instance-pick">pick</a></li><li><a href="#Model-instance-toPairs">toPairs</a></li><li><a href="#Model-instance-values">values</a></li></ul><h4><a href="#Model-subsection-events">Events</a></h4><ul class="events"><li><a href="#Model-event-counting">counting</a></li><li><a href="#Model-event-created">created</a></li><li><a href="#Model-event-creating">creating</a></li><li><a href="#Model-event-destroyed">destroyed</a></li><li><a href="#Model-event-destroying">destroying</a></li><li><a href="#Model-event-fetched">fetched</a></li><li><a href="#Model-event-fetching">fetching</a></li><li><a href="#Model-event-saved">saved</a></li><li><a href="#Model-event-saving">saving</a></li><li><a href="#Model-event-updated">updated</a></li><li><a href="#Model-event-updating">updating</a></li><li><a href="#Model-instance-fetched:collection">fetched:collection</a></li><li><a href="#Model-instance-fetching:collection">fetching:collection</a></li></ul></li><li><h3><a href="#section-Model-static-NoRowsDeletedError">NoRowsDeletedError</a></h3><h4><a href="#Model-static-NoRowsDeletedError-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Model-static-NoRowsDeletedError">NoRowsDeletedError</a></li></ul></li><li><h3><a href="#section-Model-static-NoRowsUpdatedError">NoRowsUpdatedError</a></h3><h4><a href="#Model-static-NoRowsUpdatedError-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Model-static-NoRowsUpdatedError">NoRowsUpdatedError</a></li></ul></li><li><h3><a href="#section-Model-static-NotFoundError">NotFoundError</a></h3><h4><a href="#Model-static-NotFoundError-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Model-static-NotFoundError">NotFoundError</a></li></ul></li><li><h3><a href="#section-Collection">Collection</a></h3><h4><a href="#Collection-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Collection">Collection</a></li><li><a href="#Collection-instance-initialize">initialize</a></li></ul><h4><a href="#Collection-subsection-static">Static</a></h4><ul class="static"><li><a href="#Collection-static-extend">extend</a></li><li><a href="#Collection-static-forge">forge</a></li></ul><h4><a href="#Collection-subsection-methods">Methods</a></h4><ul class="methods"><li><a href="#Collection-instance-add">add</a></li><li><a href="#Collection-instance-at">at</a></li><li><a href="#Collection-instance-attach">attach</a></li><li><a href="#Collection-instance-clone">clone</a></li><li><a href="#Collection-instance-count">count</a></li><li><a href="#Collection-instance-create">create</a></li><li><a href="#Collection-instance-detach">detach</a></li><li><a href="#Collection-instance-fetch">fetch</a></li><li><a href="#Collection-instance-fetchOne">fetchOne</a></li><li><a href="#Collection-instance-findWhere">findWhere</a></li><li><a href="#Collection-instance-get">get</a></li><li><a href="#Collection-instance-invokeThen">invokeThen</a></li><li><a href="#Collection-instance-load">load</a></li><li><a href="#Collection-instance-off">off</a></li><li><a href="#Collection-instance-on">on</a></li><li><a href="#Collection-instance-once">once</a></li><li><a href="#Collection-instance-orderBy">orderBy</a></li><li><a href="#Collection-instance-parse">parse</a></li><li><a href="#Collection-instance-pluck">pluck</a></li><li><a href="#Collection-instance-pop">pop</a></li><li><a href="#Collection-instance-push">push</a></li><li><a href="#Collection-instance-query">query</a></li><li><a href="#Collection-instance-reduceThen">reduceThen</a></li><li><a href="#Collection-instance-remove">remove</a></li><li><a href="#Collection-instance-reset">reset</a></li><li><a href="#Collection-instance-resetQuery">resetQuery</a></li><li><a href="#Collection-instance-serialize">serialize</a></li><li><a href="#Collection-instance-set">set</a></li><li><a href="#Collection-instance-shift">shift</a></li><li><a href="#Collection-instance-slice">slice</a></li><li><a href="#Collection-instance-through">through</a></li><li><a href="#Collection-instance-toJSON">toJSON</a></li><li><a href="#Collection-instance-trigger">trigger</a></li><li><a href="#Collection-instance-triggerThen">triggerThen</a></li><li><a href="#Collection-instance-unshift">unshift</a></li><li><a href="#Collection-instance-updatePivot">updatePivot</a></li><li><a href="#Collection-instance-where">where</a></li><li><a href="#Collection-instance-withPivot">withPivot</a></li></ul><h4><a href="#Collection-subsection-lodash-methods">Lodash Methods</a></h4><ul class="lodash-methods"><li><a href="#Collection-instance-chain">chain</a></li><li><a href="#Collection-instance-countBy">countBy</a></li><li><a href="#Collection-instance-difference">difference</a></li><li><a href="#Collection-instance-drop">drop</a></li><li><a href="#Collection-instance-each">each</a></li><li><a href="#Collection-instance-every">every</a></li><li><a href="#Collection-instance-filter">filter</a></li><li><a href="#Collection-instance-find">find</a></li><li><a href="#Collection-instance-first">first</a></li><li><a href="#Collection-instance-forEach">forEach</a></li><li><a href="#Collection-instance-groupBy">groupBy</a></li><li><a href="#Collection-instance-head">head</a></li><li><a href="#Collection-instance-includes">includes</a></li><li><a href="#Collection-instance-indexOf">indexOf</a></li><li><a href="#Collection-instance-initial">initial</a></li><li><a href="#Collection-instance-invokeMap">invokeMap</a></li><li><a href="#Collection-instance-isEmpty">isEmpty</a></li><li><a href="#Collection-instance-last">last</a></li><li><a href="#Collection-instance-lastIndexOf">lastIndexOf</a></li><li><a href="#Collection-instance-map">map</a></li><li><a href="#Collection-instance-max">max</a></li><li><a href="#Collection-instance-maxBy">maxBy</a></li><li><a href="#Collection-instance-min">min</a></li><li><a href="#Collection-instance-minBy">minBy</a></li><li><a href="#Collection-instance-reduce">reduce</a></li><li><a href="#Collection-instance-reduceRight">reduceRight</a></li><li><a href="#Collection-instance-reject">reject</a></li><li><a href="#Collection-instance-shuffle">shuffle</a></li><li><a href="#Collection-instance-size">size</a></li><li><a href="#Collection-instance-some">some</a></li><li><a href="#Collection-instance-sortBy">sortBy</a></li><li><a href="#Collection-instance-tail">tail</a></li><li><a href="#Collection-instance-take">take</a></li><li><a href="#Collection-instance-toArray">toArray</a></li><li><a href="#Collection-instance-without">without</a></li></ul><h4><a href="#Collection-subsection-events">Events</a></h4><ul class="events"><li><a href="#Collection-event-fetched">fetched</a></li></ul></li><li><h3><a href="#section-Collection-static-EmptyError">EmptyError</a></h3><h4><a href="#Collection-static-EmptyError-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Collection-static-EmptyError">EmptyError</a></li></ul></li><li><h3><a href="#section-Events">Events</a></h3><h4><a href="#Events-subsection-construction">Construction</a></h4><ul class="construction"><li><a href="#Events">Events</a></li></ul><h4><a href="#Events-subsection-methods">Methods</a></h4><ul class="methods"><li><a href="#Events-instance-off">off</a></li><li><a href="#Events-instance-on">on</a></li><li><a href="#Events-instance-once">once</a></li><li><a href="#Events-instance-trigger">trigger</a></li><li><a href="#Events-instance-triggerThen">triggerThen</a></li></ul></li></ul>
      
    </nav>

    <div class="main-container ">
      <div class="main-column">
        

        



    













    


    <section class="readme">
        <article><h1 id="a-hrefhttpbookshelfjsorgbookshelfjsa"><a href="http://bookshelfjs.org">bookshelf.js</a></h1><p><a href="https://www.npmjs.com/package/bookshelf"><img src="https://img.shields.io/npm/v/bookshelf.svg?style=flat" alt="NPM Version"></a>
<a href="https://travis-ci.org/bookshelf/bookshelf"><img src="https://travis-ci.org/bookshelf/bookshelf.svg?branch=master" alt="Build Status"></a>
<a href="https://david-dm.org/bookshelf/bookshelf"><img src="https://david-dm.org/bookshelf/bookshelf/status.svg" alt="Dependency Status"></a>
<a href="https://david-dm.org/bookshelf/bookshelf?type=dev"><img src="https://david-dm.org/bookshelf/bookshelf/dev-status.svg" alt="devDependency Status"></a></p>
<p>Bookshelf is a JavaScript ORM for Node.js, built on the <a href="http://knexjs.org">Knex</a> SQL query builder. Featuring both promise based and traditional callback interfaces, providing transaction support, eager/nested-eager relation loading, polymorphic associations, and support for one-to-one, one-to-many, and many-to-many relations.</p>
<p>It is designed to work well with PostgreSQL, MySQL, and SQLite3.</p>
<p><a href="http://bookshelfjs.org">Website and documentation</a>. The project is <a href="http://github.com/bookshelf/bookshelf/">hosted on GitHub</a>, and has a comprehensive <a href="https://travis-ci.org/bookshelf/bookshelf">test suite</a>.</p>
<h2 id="notice">Notice</h2><p>This project is currently undergoing some changes. You may want to <a href="https://github.com/bookshelf/bookshelf/issues/1600">read the discussion about the future of bookshelf.js</a> on GitHub.</p>
<h2 id="introduction">Introduction</h2><p>Bookshelf aims to provide a simple library for common tasks when querying databases in JavaScript, and forming relations between these objects, taking a lot of ideas from the the <a href="http://en.wikipedia.org/wiki/Data_mapper_pattern">Data Mapper Pattern</a>.</p>
<p>With a concise, literate codebase, Bookshelf is simple to read, understand, and extend. It doesn't force you to use any specific validation scheme, provides flexible and efficient relation/nested-relation loading, and first class transaction support.</p>
<p>It's a lean Object Relational Mapper, allowing you to drop down to the raw knex interface whenever you need a custom query that doesn't quite fit with the stock conventions.</p>
<h2 id="installation">Installation</h2><p>You'll need to install a copy of <a href="http://knexjs.org/">knex.js</a>, and either mysql, pg, or sqlite3 from npm.</p>
<pre class="prettyprint source lang-js"><code>$ npm install knex@0.13 --save
$ npm install bookshelf --save

# Then add one of the following:
$ npm install pg
$ npm install mysql
$ npm install mariasql
$ npm install sqlite3</code></pre><p>The Bookshelf library is initialized by passing an initialized <a href="http://knexjs.org/">Knex</a> client instance. The <a href="http://knexjs.org/">knex documentation</a> provides a number of examples for different databases.</p>
<pre class="prettyprint source lang-js"><code>var knex = require('knex')({
  client: 'mysql',
  connection: {
    host     : '127.0.0.1',
    user     : 'your_database_user',
    password : 'your_database_password',
    database : 'myapp_test',
    charset  : 'utf8'
  }
});

var bookshelf = require('bookshelf')(knex);

var User = bookshelf.Model.extend({
  tableName: 'users'
});</code></pre><p>This initialization should likely only ever happen once in your application. As it creates a connection pool for the current database, you should use the <code>bookshelf</code> instance returned throughout your library. You'll need to store this instance created by the initialize somewhere in the application so you can reference it. A common pattern to follow is to initialize the client in a module so you can easily reference it later:</p>
<pre class="prettyprint source lang-js"><code>// In a file named something like bookshelf.js
var knex = require('knex')(dbConfig);
module.exports = require('bookshelf')(knex);

// elsewhere, to use the bookshelf client:
var bookshelf = require('./bookshelf');

var Post = bookshelf.Model.extend({
  // ...
});</code></pre><h2 id="examples">Examples</h2><p>Here is an example to get you started:</p>
<pre class="prettyprint source lang-js"><code>var knex = require('knex')({client: 'mysql', connection: process.env.MYSQL_DATABASE_CONNECTION });
var bookshelf = require('bookshelf')(knex);

var User = bookshelf.Model.extend({
  tableName: 'users',
  posts: function() {
    return this.hasMany(Posts);
  }
});

var Posts = bookshelf.Model.extend({
  tableName: 'messages',
  tags: function() {
    return this.belongsToMany(Tag);
  }
});

var Tag = bookshelf.Model.extend({
  tableName: 'tags'
})

User.where('id', 1).fetch({withRelated: ['posts.tags']}).then(function(user) {
  console.log(user.related('posts').toJSON());
}).catch(function(err) {
  console.error(err);
});</code></pre><h2 id="plugins">Plugins</h2><ul>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Model-Registry">Registry</a>: Register models in a central location so that you can refer to them using a string in relations instead of having to require it every time. Helps deal with the challenges of circular module dependencies in Node.</li>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Virtuals">Virtuals</a>: Define virtual properties on your model to compute new values.</li>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Visibility">Visibility</a>: Specify a whitelist/blacklist of model attributes when serialized toJSON.</li>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Pagination">Pagination</a>: Adds <code>fetchPage</code> methods to use for pagination in place of <code>fetch</code> and <code>fetchAll</code>.</li>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Case-Converter">Case Converter</a>: Handles the conversion between the database's snake_cased and a model's camelCased properties automatically.</li>
<li><a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Processor">Processor</a>: Allows defining custom processor functions that handle transformation of values whenever they are <code>.set()</code> on a model.</li>
</ul>
<h2 id="community-plugins">Community plugins</h2><ul>
<li><a href="https://github.com/seegno/bookshelf-cascade-delete">bookshelf-cascade-delete</a> - Cascade delete related models on destroy.</li>
<li><a href="https://github.com/seegno/bookshelf-json-columns">bookshelf-json-columns</a> - Parse and stringify JSON columns on save and fetch instead of manually define hooks for each model (PostgreSQL and SQLite).</li>
<li><a href="https://github.com/seegno/bookshelf-mask">bookshelf-mask</a> - Similar to <a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Visibility">Visibility</a> but supporting multiple scopes, masking models and collections using the <a href="https://github.com/nemtsov/json-mask">json-mask</a> API.</li>
<li><a href="https://github.com/bogus34/bookshelf-schema">bookshelf-schema</a> - A plugin for handling fields, relations, scopes and more.</li>
<li><a href="https://github.com/bogus34/bookshelf-signals">bookshelf-signals</a> - A plugin that translates Bookshelf events to a central hub.</li>
<li><a href="https://github.com/estate/bookshelf-paranoia">bookshelf-paranoia</a> - Protect your database from data loss by soft deleting your rows.</li>
<li><a href="https://github.com/estate/bookshelf-uuid">bookshelf-uuid</a> - Automatically generates UUIDs for your models.</li>
<li><a href="https://github.com/bsiddiqui/bookshelf-modelbase">bookshelf-modelbase</a> - An alternative to extend <code>Model</code>, adding timestamps, attribute validation and some native CRUD methods.</li>
<li><a href="https://github.com/sequiturs/bookshelf-advanced-serialization">bookshelf-advanced-serialization</a> - A more powerful visibility plugin, supporting serializing models and collections according to access permissions, application context, and after ensuring relations have been loaded.</li>
<li><a href="https://github.com/popodidi/bookshelf-plugin-mode">bookshelf-plugin-mode</a> - Plugin inspired by <a href="https://github.com/tgriesser/bookshelf/wiki/Plugin:-Visibility">Visibility</a> plugin, providing functionality to specify different modes with corresponding visible/hidden fields of model.</li>
<li><a href="https://github.com/venables/bookshelf-secure-password">bookshelf-secure-password</a> - A plugin for easily securing passwords using bcrypt.</li>
<li><a href="https://github.com/DJAndries/bookshelf-default-select">bookshelf-default-select</a> - Enables default column selection for models. Inspired by <a href="https://github.com/tgriesser/bookshelf/wiki/Plugin:-Visibility">Visibility</a>, but operates on the database level.</li>
<li><a href="https://github.com/DJAndries/bookshelf-ez-fetch">bookshelf-ez-fetch</a> - Convenient fetching methods which allow for compact filtering, relation selection and error handling.</li>
<li><a href="https://github.com/ericclemmons/bookshelf-manager">bookshelf-manager</a> - Model &amp; Collection manager to make it easy to create &amp; save deep, nested JSON structures from API requests.</li>
</ul>
<h2 id="support">Support</h2><p>Have questions about the library? Come join us in the <a href="http://webchat.freenode.net/?channels=bookshelf">#bookshelf freenode IRC channel</a> for support on <a href="http://knexjs.org/">knex.js</a> and bookshelf.js, or post an issue on <a href="http://stackoverflow.com/questions/tagged/bookshelf.js">Stack Overflow</a> or in the GitHub <a href="https://github.com/bookshelf/bookshelf/issues">issue tracker</a>.</p>
<h2 id="faq">F.A.Q.</h2><h3 id="can-i-use-standard-nodejs-style-callbacks">Can I use standard node.js style callbacks?</h3><p>Yes - you can call <code>.asCallback(function(err, resp) {</code> on any &quot;sync&quot; method and use the standard <code>(err, result)</code> style callback interface if you prefer.</p>
<h3 id="my-relations-dont-seem-to-be-loading-whats-up">My relations don't seem to be loading, what's up?</h3><p>Make sure you check that the type is correct for the initial parameters passed to the initial model being fetched. For example <code>new Model({id: '1'}).load([relations...])</code> will not return the same as <code>Model({id: 1}).load([relations...])</code> - notice that the id is a string in one case and a number in the other. This can be a common mistake if retrieving the id from a url parameter.</p>
<p>This is only an issue if you're eager loading data with load without first fetching the original model. <code>Model({id: '1'}).fetch({withRelated: [relations...]})</code> should work just fine.</p>
<h3 id="my-process-wont-exit-after-my-script-is-finished-why">My process won't exit after my script is finished, why?</h3><p>The issue here is that Knex, the database abstraction layer used by Bookshelf, uses connection pooling and thus keeps the database connection open. If you want your process to exit after your script has finished, you will have to call <code>.destroy(cb)</code> on the <code>knex</code> property of your <code>Bookshelf</code> instance or on the <code>Knex</code> instance passed during initialization. More information about connection pooling can be found over at the <a href="http://knexjs.org/#Installation-pooling">Knex docs</a>.</p>
<h3 id="how-do-i-debug">How do I debug?</h3><p>If you pass <code>{debug: true}</code> as one of the options in your initialize settings, you can see all of the query calls being made. Sometimes you need to dive a bit further into the various calls and see what all is going on behind the scenes. I'd recommend <a href="https://github.com/dannycoates/node-inspector">node-inspector</a>, which allows you to debug code with <code>debugger</code> statements like you would in the browser.</p>
<p>Bookshelf uses its own copy of the &quot;bluebird&quot; promise library, you can read up here for more on debugging these promises... but in short, adding:</p>
<pre class="prettyprint source lang-js"><code>process.stderr.on('data', function(data) {
  console.log(data);
});</code></pre><p>At the start of your application code will catch any errors not otherwise caught in the normal promise chain handlers, which is very helpful in debugging.</p>
<h3 id="how-do-i-run-the-test-suite">How do I run the test suite?</h3><p>See the <a href="https://github.com/bookshelf/bookshelf/blob/master/.github/CONTRIBUTING.md#running-the-tests">CONTRIBUTING</a>
document on GitHub.</p>
<h3 id="can-i-use-bookshelf-outside-of-nodejs">Can I use Bookshelf outside of Node.js?</h3><p>While it primarily targets Node.js, all dependencies are browser compatible, and it could be adapted to work with other javascript environments supporting a sqlite3 database, by providing a custom <a href="http://knexjs.org/#Adapters">Knex adapter</a>.</p>
<h3 id="which-opensource-projects-are-using-bookshelf">Which open-source projects are using Bookshelf?</h3><p>We found the following projects using Bookshelf, but there can be more:</p>
<ul>
<li><a href="https://ghost.org/">Ghost</a> (A blogging platform) uses bookshelf. [<a href="https://github.com/TryGhost/Ghost/tree/master/core/server/models">Link</a>]</li>
<li><a href="http://soapee.com/">Soapee</a> (Soap Making Community and Resources) uses bookshelf. [<a href="https://github.com/nazar/soapee-api/tree/master/src/models">Link</a>]</li>
<li><a href="http://nodeza.co.za/">NodeZA</a> (Node.js social platform for developers in South Africa) uses bookshelf. [<a href="https://github.com/qawemlilo/nodeza/tree/master/models">Link</a>]</li>
<li><a href="https://github.com/sunday-cooks/sunday-cook">Sunday Cook</a> (A social cooking event platform) uses bookshelf. [<a href="https://github.com/sunday-cooks/sunday-cook/tree/master/server/bookshelf">Link</a>]</li>
<li><a href="http://www.flyptox.com/">FlyptoX</a> (Open-source Node.js cryptocurrency exchange) uses bookshelf. [<a href="https://github.com/FlipSideHR/FlyptoX/tree/master/server/models">Link</a>]</li>
<li>And of course, everything on <a href="https://www.npmjs.com/browse/depended/bookshelf">here</a> use bookshelf too.</li>
</ul></article>
    </section>



  <section class="tutorials">
    
        

<article class="tutorial">
  <h2 id="associations">Associations</h2>
  <p>Bookshelf handles one-to-one, one-to-many, and many-to-many associations by defining relationships on models.</p>
  
    <section class="sections">
      <h3 id="one-to-one">One-to-one</h3>
      <p>One-to-one associations can be created with <a href="#Model-instance-belongsTo"><code>belongsTo</code></a>, <a href="#Model-instance-hasOne"><code>hasOne</code></a>, and <a href="#Model-instance-morphOne"><code>morphOne</code></a> relation types.</p>
<pre class="prettyprint source"><code>var Book = bookshelf.Model.extend({
  tableName: 'books',
  summary: function() {
    return this.hasOne(Summary);
  }
});

var Summary = bookshelf.Model.extend({
  tableName: 'summaries',
  book: function() {
    return this.belongsTo(Book);
  }
});</code></pre><p>A Knex migration for the above relationship could be created with:</p>
<pre class="prettyprint source"><code>exports.up = function(knex, Promise) {
  return knex.schema.createTable('books', function(table) {
    table.increments('id').primary();
    table.string('name');
  }).createTable('summaries', function(table) {
    table.increments('id').primary();
    table.string('details');
    table.integer('book_id').unique().references('books.id');
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('books')
    .dropTable('summaries');
};</code></pre>
    </section>
  
    <section class="sections">
      <h3 id="one-to-many">One-to-many</h3>
      <p>One-to-many associations can be created with <a href="#Model-instance-belongsTo"><code>belongsTo</code></a>, <a href="#Model-instance-hasMany"><code>hasMany</code></a>, <a href="#Model-instance-morphMany"><code>morphMany</code></a> / <a href="#Model-instance-morphTo"><code>morphTo</code></a>, and some of the <a href="#Model-instance-through"><code>through</code></a> relation types.</p>
<pre class="prettyprint source"><code>var Book = bookshelf.Model.extend({
  tableName: 'books',
  pages: function() {
    return this.hasMany(Page);
  }
});

var Page = bookshelf.Model.extend({
  tableName: 'pages',
  book: function() {
    return this.belongsTo(Book);
  }
});</code></pre><p>A Knex migration for the above relationship could be created with:</p>
<pre class="prettyprint source"><code>exports.up = function(knex, Promise) {
  return knex.schema.createTable('books', function(table) {
    table.increments('id').primary();
    table.string('name');
  }).createTable('pages', function(table) {
    table.increments('id').primary();
    table.string('content');
    table.integer('book_id').references('books.id')
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('books')
    .dropTable('pages');
};</code></pre>
    </section>
  
    <section class="sections">
      <h3 id="many-to-many">Many-to-many</h3>
      <p>Many-to-many associations can be created with <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a>, and <a href="#Model-instance-through"><code>through</code></a> relation types.</p>
<pre class="prettyprint source"><code>var Book = bookshelf.Model.extend({
  tableName: 'books',
  authors: function() {
    return this.belongsToMany(Author);
  }
});

var Author = bookshelf.Model.extend({
  tableName: 'authors',
  books: function() {
    return this.belongsToMany(Book);
  }
});</code></pre><p>A Knex migration for the above relationship could be created with:</p>
<pre class="prettyprint source"><code>exports.up = function(knex, Promise) {
  return knex.schema.createTable('books', function(table) {
    table.increments('id').primary();
    table.string('name');
  }).createTable('authors', function(table) {
    table.increments('id').primary();
    table.string('name');
  }).createTable('authors_books', function(table) {
    table.integer('author_id').references('authors.id');
    table.integer('book_id').references('books.id');
  });
};

exports.down = function(knex, Promise) {
  return knex.schema.dropTable('books')
    .dropTable('authors')
    .dropTable('authors_books');
};</code></pre>
    </section>
  
    <section class="sections">
      <h3 id="polymorphic">Polymorphic</h3>
      <p>With polymorphic associations, a model can belong to more than one other model, on a single association. For example, you might have a photo model that belongs to either a <code>Site</code> model or a <code>Post</code> model. Here’s how this could be declared:</p>
<pre class="prettyprint source"><code>var Site = bookshelf.Model.extend({
  tableName: 'sites',
  photo: function() {
    return this.morphOne(Photo, 'imageable');
  }
});

var Post = bookshelf.Model.extend({
  tableName: 'posts',
  photos: function() {
    return this.morphMany(Photo, 'imageable');
  }
});

var Photo = bookshelf.Model.extend({
  tableName: 'photos',
  imageable: function() {
    return this.morphTo('imageable', Site, Post);
  }
});</code></pre><p>Optionally, if you wish to use column names other than the <code>name</code> suffixed with <code>_type</code> and <code>_id</code> (for example, if you use a different naming convention in your database), you may specify custom <code>columnNames</code>. This argument, when specified, expects an array containing the substitute <code>_type</code> and <code>_id</code> columns, respectively.</p>
<p>Note that any custom <code>columnNames</code> must be specified on both ends of the relationship! Examples are provided for each of the polymorphic relationship types individually.</p>
    </section>
  
</article>

    
        

<article class="tutorial">
  <h2 id="tutorials">Tutorials</h2>
  
  
    <section class="sections">
      <h3 id="parse-and-format">Parse and Format</h3>
      <p>You sometimes need to manipulate data from the database into the correct types.
Maybe you have a TEXT field that is actually a comma separated list of tags, or a blob field with JSON that you want to
parse.</p>
<p>This can be done with the model's <a href="#Model-instance-parse"><code>parse</code></a> and <a href="#Model-instance-format"><code>format</code></a>
methods:</p>
<pre class="prettyprint source"><code>Book = bookshelf.Model.extend({
  tableName: 'books',
  parse: function(response) {
    response.tags = JSON.parse(response.tags || '[]');
    return response;
  },
  format: function(attributes) {
    attributes.tags = JSON.stringify(attributes.tags || []);
    return attributes;
  }
});</code></pre><p>A very common use case for this is converting camelCase attributes to snake_case column names and vice-versa:</p>
<pre class="prettyprint source"><code>Book = bookshelf.Model.extend({
  tableName: 'books',
  parse: function(response) {
    return _.mapKeys(response, function(value, key) {
      return _.camelCase(key);
    });
  },
  format: function(attributes) {
    return _.mapKeys(attributes, function(value, key) {
      return _.snakeCase(key);
    });
  }
});</code></pre>
    </section>
  
</article>

    
  </section>











<header>
    
        <h2 id="section-Bookshelf">Bookshelf</h2>
        
            <div class="class-description"><p>The Bookshelf library is initialized by passing an initialized Knex client
instance. The knex documentation provides a number of examples for different
databases.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Bookshelf-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method no-description">
    

        <h4 id="Bookshelf" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="parameters"><span class="name"><a href="#Bookshelf">Bookshelf</a></span><span class="parenthesis">(</span><span class="item-name">knex</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line15" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">knex</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Knex</code
>
</span></code>
      

      <div class="description">
        <p>Knex instance.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

        

    
    </div>

    

    

     

    

    

    
        <h3
          id="Bookshelf-subsection-members"
          class="subsection-title"
        >Members</h3>
        
            
<div class="method has-description">
    

        <h4 id="Bookshelf-instance-knex" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >bookshelf</span
                >.</span><span class="name"><a href="#Bookshelf-instance-knex">knex</a></span><span class="type-signature"> :Knex</span>
          </span
          ><a href="docs/src_bookshelf.js.html#line316" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>A reference to the <a href="http://knexjs.org">Knex.js</a> instance being used by Bookshelf.</p>
    </div>
  
</div>

        
    

    
        <h3
          id="Bookshelf-subsection-methods"
          class="subsection-title"
        >Methods</h3>
        <div class="methods">
          
              
<div class="method has-description">
    

        <h4 id="Bookshelf-instance-plugin" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >bookshelf</span
                >.</span><span class="parameters"><span class="name"><a href="#Bookshelf-instance-plugin">plugin</a></span><span class="parenthesis">(</span><span class="item-name">plugin</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line242" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">plugin</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >array</code
><code class="type-or">|</code><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        <p>The plugin or plugins to add. If you provide a string it can
   represent a built-in plugin, an npm package or a file somewhere on
   your project. You can also pass a function as argument to add it as a
   plugin. Finally, it's also possible to pass an array of strings or
   functions to add them all at once.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>This can be anything you want and it will be passed directly to the
   plugin as the second argument when loading it.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>This method provides a nice, tested, standardized way of adding plugins
to a <code>Bookshelf</code> instance, injecting the current instance into the
plugin, which should be a <code>module.exports</code>.</p>
<p>You can add a plugin by specifying a string with the name of the plugin
to load. In this case it will try to find a module. It will first check
for a match within the <code>bookshelf/plugins</code> directory. If nothing is
found it will pass the string to <code>require()</code>, so you can either require
an npm dependency by name or one of your own modules by relative path:</p>
<pre class="prettyprint source"><code>bookshelf.plugin('./bookshelf-plugins/my-favourite-plugin');
bookshelf.plugin('plugin-from-npm');</code></pre><p>There are a few built-in plugins already, along with many independently
developed ones. See <a href="#plugins">the list of available plugins</a>.</p>
<p>You can also provide an array of strings or functions, which is the same
as calling <code>bookshelf.plugin()</code> multiple times. In this case the same
options object will be reused:</p>
<pre class="prettyprint source"><code>  bookshelf.plugin(['registry', './my-plugins/special-parse-format']);</code></pre><p>Example plugin:</p>
<pre class="prettyprint source"><code>// Converts all string values to lower case when setting attributes on a model
module.exports = function(bookshelf) {
  bookshelf.Model = bookshelf.Model.extend({
    set: function(key, value, options) {
      if (!key) return this;
      if (typeof value === 'string') value = value.toLowerCase();
      return bookshelf.Model.prototype.set.call(this, key, value, options);
    }
  });
}</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Bookshelf-instance-transaction" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >bookshelf</span
                >.</span><span class="parameters"><span class="name"><a href="#Bookshelf-instance-transaction">transaction</a></span><span class="parenthesis">(</span><span class="item-name">transactionCallback</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<mixed></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line184" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">transactionCallback</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Bookshelf~transactionCallback">Bookshelf~transactionCallback</a></code
>
</span></code>
      

      <div class="description">
        <p>Callback containing transaction logic. The callback should return a
   promise.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<mixed></code
>




<span class="param-desc">
  <p>A promise resolving to the value returned from <a href="#Bookshelf~transactionCallback"><code>transactionCallback</code></a>.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>An alias to <code><a href="http://knexjs.org/#Transactions">Knex#transaction</a></code>, the <code>transaction</code> object must be passed along in the
options of any relevant Bookshelf calls, to ensure all queries are on the
same connection. The entire transaction block is a promise that will
resolve when the transaction is committed, or fail if the transaction is
rolled back.</p>
<pre class="prettyprint source"><code>var Promise = require('bluebird');

Bookshelf.transaction(function(t) {
  return new Library({name: 'Old Books'})
    .save(null, {transacting: t})
    .tap(function(model) {
      return Promise.map([
        {title: 'Canterbury Tales'},
        {title: 'Moby Dick'},
        {title: 'Hamlet'}
      ], function(info) {
        // Some validation could take place here.
        return new Book(info).save({'shelf_id': model.id}, {transacting: t});
      });
    });
}).then(function(library) {
  console.log(library.related('books').pluck('title'));
}).catch(function(err) {
  console.error(err);
});</code></pre>
    </div>
  
</div>

          
        </div>
    

    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<div class="method has-description">
    

        <h4 id="Bookshelf~transactionCallback" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="parameters"><span class="name"><a href="#Bookshelf~transactionCallback">transactionCallback</a></span><span class="parenthesis">(</span><span class="item-name">transaction</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<mixed></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line229" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">transaction</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="http://knexjs.org/#Transactions">Knex#transaction</a></li>
        
            <li><a href="#Bookshelf-instance-transaction">Bookshelf#transaction</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<mixed></code
>





        
  </div>

  
    <div class="item-description">
        <p>A transaction block to be provided to <a href="#Bookshelf-instance-transaction"><code>Bookshelf#transaction</code></a>.</p>
    </div>
  
</div>

            
    

    
</article>



</section>







<header>
    
        <h2 id="section-Model">Model</h2>
        
            <div class="class-description"><p>Models are simple objects representing individual database rows, specifying
the tableName and any relations to other models. They can be extended with
any domain-specific methods, which can handle components such as validations,
computed properties, and access control.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Model-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Model" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="parameters"><span class="name"><a href="#Model">Model</a></span><span class="parenthesis">(</span><span class="item-name">attributes</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_model.js.html#line12" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attributes</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Initial values for this model's attributes.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">tableName</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Initial value for <a href="#Model-instance-tableName"><code>tableName</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">hasTimestamps</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Initial value for <a href="#Model-instance-hasTimestamps"><code>hasTimestamps</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">parse</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Convert attributes by <a href="#Model-instance-parse"><code>parse</code></a> before being <a href="#Model-instance-set"><code>set</code></a> on the model.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>When creating an instance of a model, you can pass in the initial values of
the attributes, which will be <a href="#Model-instance-set"><code>set</code></a> on the
model. If you define an <code>initialize</code> function, it will be invoked
when the model is created.</p>
<pre class="prettyprint source"><code>new Book({
  title: &quot;One Thousand and One Nights&quot;,
  author: &quot;Scheherazade&quot;
});</code></pre><p>In rare cases, if you're looking to get fancy, you may want to override
<code>constructor</code>, which allows you to replace the
actual constructor function for your model.</p>
<pre class="prettyprint source"><code>let Book = bookshelf.Model.extend({
  tableName: 'documents',
  constructor: function() {
    bookshelf.Model.apply(this, arguments);
    this.on('saving', function(model, attrs, options) {
      options.query.where('type', '=', 'book');
    });
  }
});</code></pre>
    </div>
  
</div>

        
          
<div class="method has-description">
    

        <h4 id="Model-instance-initialize" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-initialize">initialize</a></span><span class="parenthesis">(</span><span class="item-name">attributes</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line68" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attributes</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Initial values for this model's attributes.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>The hash of options passed to <a href="#Model"><code>constructor</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Model">Model</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Called by the <a href="#Model"><code>Model constructor</code></a> when creating a new instance.
Override this function to add custom initialization, such as event listeners.
Because plugins may override this method in subclasses, make sure to call
your super (extended) class.  e.g.</p>
<pre class="prettyprint source"><code>initialize: function() {
    this.constructor.__super__.initialize.apply(this, arguments);
    // Your initialization code ...
}</code></pre>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    
        <h3 id="Model-subsection-static" class="subsection-title">Static</h3>
        <div class="statics">
          
              
<div class="method has-description">
    

        <h4 id="Model-static-collection" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-collection">collection</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line71" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>Customer.collection().fetch().then(function(collection) {
  // ...
});</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a>[]</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>A simple static helper to instantiate a new <a href="#Collection"><code>Collection</code></a>, setting
the current <code>model</code> as the collection's target.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-static-count" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-count">count</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">column</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<Number></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line93" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">column</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">'*'</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Specify a column to count - rows with null values in this column will be excluded.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.8.2</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<Number></code
>




<span class="param-desc">
  <p>A promise resolving to the number of matching rows.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Gets the number of matching records in the database, respecting any
previous calls to <a href="#Model-instance-query"><code>query</code></a>. If a <code>column</code> is provided,
records with a null value in that column will be excluded from the count.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-static-extend" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-extend">extend</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">prototypeProperties</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">classProperties</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  function</span>
          </span
          ><a href="docs/src_base_model.js.html#line761" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">prototypeProperties</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Instance methods and properties to be attached to instances of the new
  class.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">classProperties</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Class (ie. static) functions and properties to be attached to the
  constructor of the new class.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >function</code
>




<span class="param-desc">
  <p>Constructor for new <code>Model</code> subclass.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>To create a Model class of your own, you extend <a href="#Model"><code>bookshelf.Model</code></a>.</p>
<p><code>extend</code> correctly sets up the prototype chain, so subclasses created with
<code>extend</code> can be further extended and subclassed as far as you like.</p>
<pre class="prettyprint source"><code>var checkit  = require('checkit');
var Promise  = require('bluebird');
var bcrypt   = Promise.promisifyAll(require('bcrypt'));

var Customer = bookshelf.Model.extend({
  initialize: function() {
    this.constructor.__super__.initialize.apply(this, arguments);
    this.on('saving', this.validateSave);
  },

  validateSave: function() {
    return checkit(rules).run(this.attributes);
  },

  account: function() {
    return this.belongsTo(Account);
  },
}, {
  login: Promise.method(function(email, password) {
    if (!email || !password) throw new Error('Email and password are both required');
    return new this({email: email.toLowerCase().trim()}).fetch({require: true}).tap(function(customer) {
      return bcrypt.compareAsync(password, customer.get('password'))
        .then(function(res) {
          if (!res) throw new Error('Invalid password');
        });
    });
  })
});

Customer.login(email, password)
  .then(function(customer) {
    res.json(customer.omit('password'));
  }).catch(Customer.NotFoundError, function() {
    res.json(400, {error: email + ' not found'});
  }).catch(function(err) {
    console.error(err);
  });</code></pre><p><em>Brief aside on <code>super</code>: JavaScript does not provide a simple way to call
<code>super</code> — the function of the same name defined higher on the prototype
chain. If you override a core function like <a href="#Model-instance-set"><code>set</code></a>, or <a href="#Model-instance-save"><code>save</code></a>, and you want to invoke the parent object's implementation,
you'll have to explicitly call it, along these lines:</em></p>
<pre class="prettyprint source"><code>var Customer = bookshelf.Model.extend({
  set: function() {
    // ...
    bookshelf.Model.prototype.set.apply(this, arguments);
    // ...
  }
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-static-fetchAll" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-fetchAll">fetchAll</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Collection">Collection</a>></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line114" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Model-instance-fetchAll">Model#fetchAll</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Collection">Collection</a>></code
>





        
  </div>

  
    <div class="item-description">
        <p>Simple helper function for retrieving all instances of the given model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-static-forge" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-forge">forge</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">attributes</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line50" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">attributes</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Initial values for this model's attributes.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">tableName</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Initial value for <a href="#Model-instance-tableName"><code>tableName</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">hasTimestamps</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Initial value for <a href="#Model-instance-hasTimestamps"><code>hasTimestamps</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">parse</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Convert attributes by <a href="#Model-instance-parse"><code>parse</code></a> before being
  <a href="#Model-instance-set"><code>set</code></a> on the <code>model</code>.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>A simple helper function to instantiate a new Model without needing <code>new</code>.</p>
    </div>
  
</div>

          
        </div>
    

    
        <h3
          id="Model-subsection-members"
          class="subsection-title"
        >Members</h3>
        
            
<div class="method has-description">
    

        <h4 id="Model-instance-defaults" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="name"><a href="#Model-instance-defaults">defaults</a></span><span class="type-signature"> :Object|Null</span>
          </span
          ><a href="docs/src_base_model.js.html#line153" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var MyModel = bookshelf.Model.extend({
  defaults: {property1: 'foo', property2: 'bar'},
  tableName: 'my_table'
})

MyModel.forge({property1: 'blah'}).save().then(function(model) {
  // {property1: 'blah', property2: 'bar'}
})</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>This can be used to define any default values for attributes that are not
present when creating or updating a model in a <a href="#Model-instance-save"><code>save</code></a> call.
The default behavior is to <em>not</em> use these default values on updates unless
the <code>defaults: true</code> option is passed to the <a href="#Model-instance-save"><code>save</code></a> call.
For inserts the default values will always be used if present.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-hasTimestamps" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="name"><a href="#Model-instance-hasTimestamps">hasTimestamps</a></span><span class="type-signature"> :Boolean|Array</span>
          </span
          ><a href="docs/src_base_model.js.html#line198" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var MyModel = bookshelf.Model.extend({
  hasTimestamps: true,
  tableName: 'my_table'
})

var myModel = MyModel.forge({name: 'blah'}).save().then(function(savedModel) {
  // {
  //   name: 'blah',
  //   created_at: 'Sun Mar 25 2018 15:07:11 GMT+0100 (WEST)',
  //   updated_at: 'Sun Mar 25 2018 15:07:11 GMT+0100 (WEST)'
  // }
})

myModel.save({created_at: new Date(2015, 5, 2)}).then(function(updatedModel) {
  // {
  //   name: 'blah',
  //   created_at: 'Tue Jun 02 2015 00:00:00 GMT+0100 (WEST)',
  //   updated_at: 'Sun Mar 25 2018 15:07:11 GMT+0100 (WEST)'
  // }
})</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Automatically sets the current date and time on the timestamp attributes
<code>created_at</code> and <code>updated_at</code> based on the type of save method. The <em>update</em>
method will only update <code>updated_at</code>, while the <em>insert</em> method will set
both values.</p>
<p>To override the default attribute names, assign an array to this property.
The first element will be the <em>created</em> column name and the second will be
the <em>updated</em> one. If any of these elements is set to <code>null</code> that particular
timestamp attribute will not be used in the model. For example, to
automatically update only the <code>created_at</code> attribute set this property to
<code>['created_at', null]</code>.</p>
<p>You can override the timestamp attribute values of a model and those values
will be used instead of the automatic ones when saving.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-idAttribute" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="name"><a href="#Model-instance-idAttribute">idAttribute</a></span><span class="type-signature"> :string</span>
          </span
          ><a href="docs/src_base_model.js.html#line129" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>This tells the model which attribute to expect as the unique identifier
for each database row (typically an auto-incrementing primary key named
<code>'id'</code>). Note that if you are using <a href="#Model-instance-parse"><code>parse</code></a> and <a href="#Model-instance-format"><code>format</code></a> (to have your model's attributes in <code>camelCase</code>,
but your database's columns in <code>snake_case</code>, for example) this refers to
the name returned by parse (<code>myId</code>), not the actual database column
(<code>my_id</code>).</p>
<p>You can also get the parsed id attribute value by using the model's
<code>parsedIdAttribute</code> method.</p>
<p>If the table you're working with does not have a Primary-Key in the form
of a single column you'll have to override it with a getter that returns
<code>null</code>. Overriding with <code>undefined</code> does not cascade the default behavior of
the value <code>'id'</code>. Such a getter in ES6 would look like
<code>get idAttribute() { return null }</code>.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-processors" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="name"><a href="#Model-instance-processors">processors</a></span><span class="type-signature"> :Boolean|Object</span>
          </span
          ><a href="docs/src_plugins_processor.js.html#line74" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>An object mapping attribute names to one or more processor functions to apply to that attribute. By default the
value of this property is <code>false</code> to indicate that this model doesn't have any processors set.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-tableName" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="name"><a href="#Model-instance-tableName">tableName</a></span><span class="type-signature"> :string</span>
          </span
          ><a href="docs/src_base_model.js.html#line91" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var Television = bookshelf.Model.extend({
  tableName: 'televisions'
});</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>A required property for any database usage, The
<a href="#Model-instance-tableName"><code>tableName</code></a> property refers to the database
table name the model will query against.</p>
    </div>
  
</div>

        
    

    
        <h3
          id="Model-subsection-methods"
          class="subsection-title"
        >Methods</h3>
        <div class="methods">
          
              
<div class="method has-description">
    

        <h4 id="Model-instance-belongsTo" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-belongsTo">belongsTo</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line153" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>ForeignKey in this model. By default, the foreignKey is assumed to
  be the singular form of the <code>Target</code> model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model's table which <code>foreignKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>The <code>belongsTo</code> relationship is used when a model is a member of
another <code>Target</code> model.</p>
<p>It can be used in a <a href="#one-to-one">one-to-one</a> associations as the inverse
of a <a href="#Model-instance-hasOne"><code>hasOne</code></a>. It can also used in <a href="#one-to-many">one-to-many</a> associations as the inverse of a <a href="#Model-instance-hasMany"><code>hasMany</code></a>
(and is the one side of that association). In both cases, the <a href="#Model-instance-belongsTo"><code>belongsTo</code></a> relationship is used for a model that is a
member of another Target model, referenced by the foreignKey in the current
model.</p>
<pre class="prettyprint source"><code>let Book = bookshelf.Model.extend({
  tableName: 'books',
  author: function() {
    return this.belongsTo(Author);
  }
});

// select * from `books` where id = 1
// select * from `authors` where id = book.author_id
Book.where({id: 1}).fetch({withRelated: ['author']}).then(function(book) {
  console.log(JSON.stringify(book.related('author')));
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-belongsToMany" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-belongsToMany">belongsToMany</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">table</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_model.js.html#line201" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">table</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Name of the joining table. Defaults to the two table names, joined by an
  underscore, ordered alphabetically.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in this model. By default, the <code>foreignKey</code> is assumed to
  be the singular form of this model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in the <code>Target</code> model. By default, the <code>otherKey</code> is assumed to
  be the singular form of the <code>Target</code> model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in this model's table which <code>foreignKey</code> references, if other
  than <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model's table which <code>otherKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>Defines a many-to-many relation, where the current model is joined to one
or more of a <code>Target</code> model through another table. The default name for
the joining table is the two table names, joined by an underscore, ordered
alphabetically. For example, a <code>users</code> table and an <code>accounts</code> table would have
a joining table of accounts_users.</p>
<pre class="prettyprint source"><code>let Account = bookshelf.Model.extend({
  tableName: 'accounts'
});

let User = bookshelf.Model.extend({
  tableName: 'users',
  allAccounts: function () {
    return this.belongsToMany(Account);
  },
  adminAccounts: function() {
    return this.belongsToMany(Account).query({where: {access: 'admin'}});
  },
  viewAccounts: function() {
    return this.belongsToMany(Account).query({where: {access: 'readonly'}});
  }
});</code></pre><p> The default key names in the joining table are the singular versions of the
 model table names, followed by <code>_id</code> /
 _{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}. So in the above case, the
 columns in the joining table
 would be <code>user_id</code>, <code>account_id</code>, and <code>access</code>, which is used as an
 example of how dynamic relations can be formed using different contexts.
 To customize the keys used in, or the <a href="#Model-instance-tableName"><code>tableName</code></a>
 used for the join table, you may specify them like so:</p>
<pre class="prettyprint source"><code> this.belongsToMany(Account, 'users_accounts', 'userid', 'accountid');</code></pre><p>If you wish to create a <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a>
association where the joining table has a primary key, and more information
about the model, you may create a <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a>
<code>through</code> relation:</p>
<pre class="prettyprint source"><code>let Doctor = bookshelf.Model.extend({
  patients: function() {
    return this.belongsToMany(Patient).through(Appointment);
  }
});

let Appointment = bookshelf.Model.extend({
  patient: function() {
    return this.belongsTo(Patient);
  },
  doctor: function() {
    return this.belongsTo(Doctor);
  }
});

let Patient = bookshelf.Model.extend({
  doctors: function() {
    return this.belongsToMany(Doctor).through(Appointment);
  }
});</code></pre><p>Collections returned by a <code>belongsToMany</code> relation are decorated with
several pivot helper methods. See <a href="#Collection-instance-attach"><code>attach</code></a>,
<a href="#Collection-instance-detach"><code>detach</code></a>, <a href="#Collection-instance-updatePivot"><code>updatePivot</code></a> and <a href="#Collection-instance-withPivot"><code>withPivot</code></a> for more
information.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-clear" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-clear">clear</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_model.js.html#line502" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>This model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Clear all attributes on the model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-clone" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-clone">clone</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_model.js.html#line570" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>Cloned instance of this model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Returns a new instance of the model with identical <code>attributes</code>, including any relations from the cloned
model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-count" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-count">count</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">column</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<Number></span>
          </span
          ><a href="docs/src_model.js.html#line745" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>Duck.where('color', 'blue').count('name')
  .then(function(count) { //...</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">column</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">'*'</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Specify a column to count - rows with null values in this column will be excluded.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.8.2</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<Number></code
>




<span class="param-desc">
  <p>A promise resolving to the number of matching rows.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Gets the number of matching records in the database, respecting any
previous calls to <a href="#Model-instance-query"><code>Model#query</code></a>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-destroy" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-destroy">destroy</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>></span>
          </span
          ><a href="docs/src_model.js.html#line1143" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>new User({id: 1})
  .destroy()
  .then(function(model) {
    // ...
  });</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">true</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Throw a <a href="#Model-static-NoRowsDeletedError"><code>Model.NoRowsDeletedError</code></a> if no records are affected by destroy. This is
  the default behavior as of version 0.13.0.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
    <h5>Fires</h5>
    <ul class="fired-event-list">
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-destroying">"destroying"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-destroyed">"destroyed"</a></code>
        </li>
      
    </ul>
    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Model-static-NoRowsDeletedError">Model.NoRowsDeletedError</a></code
>


<div class="param-desc">

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>></code
>




<span class="param-desc">
  <p>A promise resolving to the destroyed and thus
                          empty model, i.e. all attributes are <code>undefined</code>.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p><code>destroy</code> performs a <code>delete</code> on the model, using the model's <a href="#Model-instance-idAttribute"><code>idAttribute</code></a> to constrain the query.</p>
<p>A <code>"destroying"</code> event is triggered on the model before being
destroyed. To prevent destroying the model (with validation, etc.), throwing an error
inside one of these event listeners will stop destroying the model and
reject the promise.</p>
<p>A <code>"destroyed"</code> event is fired after the model's
removal is completed.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-escape" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-escape">escape</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  string</span>
          </span
          ><a href="docs/src_base_model.js.html#line429" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The attribute to escape.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >string</code
>




<span class="param-desc">
  <p>HTML-escaped value of an attribute.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Get the HTML-escaped value of an attribute.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-fetch" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-fetch">fetch</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>|null></span>
          </span
          ><a href="docs/src_model.js.html#line591" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Reject the returned response with a <a href="#Model-static-NotFoundError"><code>  NotFoundError</code></a> if results are empty.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">columns</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">'*'</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Specify columns to be retrieved.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">withRelated</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  >mixed[]</code
>
</span></code>
      

      <div class="description">
        <p>Relations to be retrieved with <code>Model</code> instance. Either one or more
 relation names or objects mapping relation names to query callbacks.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
    <h5>Fires</h5>
    <ul class="fired-event-list">
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-fetching">"fetching"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-fetched">"fetched"</a></code>
        </li>
      
    </ul>
    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Model-static-NotFoundError">Model.NotFoundError</a></code
>


<div class="param-desc">

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>|null></code
>




<span class="param-desc">
  <p>A promise resolving to the fetched <a href="#Model"><code>model</code></a> or <code>null</code> if
 none exists.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Fetches a <a href="#Model"><code>model</code></a> from the database, using any <code>attributes</code> currently set on the model to form a <code>select</code>
query.</p>
<p>A <a href="#Model-event-fetching"><code>"fetching"</code></a> event will be fired just before the
record is fetched; a good place to hook into for validation. <a href="#Model-event-fetched"><code>&quot;fetched&quot;</code></a> event will be fired when a record is
successfully retrieved.</p>
<p>If you need to constrain the query
performed by fetch, you can call <a href="#Model-instance-query"><code>query</code></a> before calling
<a href="#Model-instance-fetch"><code>fetch</code></a>.</p>
<pre class="prettyprint source"><code>// select * from `books` where `ISBN-13` = '9780440180296'
new Book({'ISBN-13': '9780440180296'})
  .fetch()
  .then(function(model) {
    // outputs 'Slaughterhouse Five'
    console.log(model.get('title'));
  });</code></pre><p><em>If you'd like to only fetch specific columns, you may specify a <code>columns</code>
property in the <code>options</code> for the <a href="#Model-instance-fetch"><code>fetch</code></a> call, or use
<a href="#Model-instance-query"><code>query</code></a>, tapping into the <code>Knex</code> <code>column</code> method to specify which columns will be fetched.</em></p>
<p>A single property, or an array of properties can be specified as a value for
the <code>withRelated</code> property. You can also execute callbacks on relations
queries (eg. for sorting a relation). The results of these relation queries
will be loaded into a <code>relations</code> property on the
model, may be retrieved with the <a href="#Model-instance-related"><code>related</code></a> method, and
will be serialized as properties on a <a href="#Model-instance-toJSON"><code>toJSON</code></a> call
unless <code>{shallow: true}</code> is passed.</p>
<pre class="prettyprint source"><code>let Book = bookshelf.Model.extend({
  tableName: 'books',
  editions: function() {
    return this.hasMany(Edition);
  },
  chapters: function() {
    return this.hasMany(Chapter);
  },
  genre: function() {
    return this.belongsTo(Genre);
  }
})

new Book({'ISBN-13': '9780440180296'}).fetch({
  withRelated: [
    'genre', 'editions',
    { chapters: function(query) { query.orderBy('chapter_number'); }}
  ]
}).then(function(book) {
  console.log(book.related('genre').toJSON());
  console.log(book.related('editions').toJSON());
  console.log(book.toJSON());
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-fetchAll" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-fetchAll">fetchAll</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Collection">Collection</a>></span>
          </span
          ><a href="docs/src_model.js.html#line769" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Rejects the returned promise with an <code>Collection.EmptyError</code> if no records are returned.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
    <h5>Fires</h5>
    <ul class="fired-event-list">
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-instance-fetching:collection">"fetching:collection"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-instance-fetched:collection">"fetched:collection"</a></code>
        </li>
      
    </ul>
    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Collection-static-EmptyError">Collection.EmptyError</a></code
>


<div class="param-desc">

    <p>Rejects the promise in the event of an empty response if the <code>require: true</code> option.</p>

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Collection">Collection</a>></code
>




<span class="param-desc">
  <p>A promise resolving to the fetched <a href="#Collection"><code>collection</code></a>.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Fetches a collection of <a href="#Model"><code>models</code></a> from the database, using any
query parameters currently set on the model to form a select query. Returns
a promise, which will resolve with the fetched collection. If you wish to
trigger an error if no models are found, pass {require: true} as one of
the options to the <code>fetchAll</code> call.</p>
<p>If you need to constrain the query performed by fetch, you can call the
<a href="#Model-instance-query"><code>query</code></a> method before calling fetch.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-fetchPage" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-fetchPage">fetchPage</a></span><span class="parenthesis">(</span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>|null></span>
          </span
          ><a href="docs/src_plugins_pagination.js.html#line34" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>Car
.query(function (qb) {
   qb.innerJoin('manufacturers', 'cars.manufacturer_id', 'manufacturers.id');
   qb.groupBy('cars.id');
   qb.where('manufacturers.country', '=', 'Sweden');
})
.orderBy('-productionYear') // Same as .orderBy('cars.productionYear', 'DESC')
.fetchPage({
   pageSize: 15, // Defaults to 10 if not specified
   page: 3, // Defaults to 1 if not specified

   // OR
   // limit: 15,
   // offset: 30,

   withRelated: ['engine'] // Passed to Model#fetchAll
})
.then(function (results) {
   console.log(results); // Paginated results object with metadata example below
})

// Pagination results:

{
   models: [&lt;Car>], // Regular bookshelf Collection
   // other standard Collection attributes
   ...
   pagination: {
       rowCount: 53, // Total number of rows found for the query before pagination
       pageCount: 4, // Total number of pages of results
       page: 3, // The requested page number
       pageSize: 15, // The requested number of rows per page

 // OR, if limit/offset pagination is used instead of page/pageSize:
       // offset: 30, // The requested offset
       // limit: 15 // The requested limit
   }
}</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >object</code
>
</span></code>
      

      <div class="description">
        <p>The pagination options, plus any additional options that will be passed to
   <a href="#Model-instance-fetchAll"><code>Model#fetchAll</code></a></p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>|null></code
>





        
  </div>

  
    <div class="item-description">
        <p>In order to use this function, you must have the <a href="https://github.com/bookshelf/bookshelf/wiki/Plugin:-Pagination">Pagination</a> plugin installed.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-format" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-format">format</a></span><span class="parenthesis">(</span><span class="item-name">attributes</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_model.js.html#line530" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attributes</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>The attributes to be converted.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>Formatted attributes.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>format</code> method is used to modify the current state of the model before
it is persisted to the database. The <code>attributes</code> passed are a shallow clone
of the <a href="#Model"><code>model</code></a>, and are only used for inserting/updating - the
current values of the model are left intact.</p>
<p>Do note that <code>format</code> is used to modify the state of the model when
accessing the database, so if you remove an attribute in your <code>format</code>
method, that attribute will never be persisted to the database, but it will
also never be used when doing a <code>fetch()</code>, which may cause unexpected
results. You should be very cautious with implementations of this method
that may remove the primary key from the list of attributes.</p>
<p>If you need to modify the database data before it is given to the model,
override the <a href="#Model-instance-parse"><code>parse</code></a> method instead. That method does the
opposite operation of <code>format</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-get" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-get">get</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  mixed</span>
          </span
          ><a href="docs/src_base_model.js.html#line233" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>note.get("title");</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the attribute to retrieve.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >mixed</code
>




<span class="param-desc">
  <p>Attribute value.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Get the current value of an attribute from the model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-has" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-has">has</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Boolean</span>
          </span
          ><a href="docs/src_base_model.js.html#line440" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The attribute to check.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Boolean</code
>




<span class="param-desc">
  <p>True if <code>attribute</code> is set, otherwise <code>false</code>.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Returns <code>true</code> if the attribute contains a value that is not null or undefined.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-hasChanged" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-hasChanged">hasChanged</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">attribute</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Boolean</span>
          </span
          ><a href="docs/src_base_model.js.html#line677" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">attribute</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Boolean</code
>




<span class="param-desc">
  <p><code>true</code> if any attribute has changed. Or, if <code>attribute</code> was specified, true
if it has changed.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Returns true if any <code>attribute</code> attribute has changed
since the last <a href="#Model-instance-fetch"><code>fetch</code></a>, <a href="#Model-instance-save"><code>save</code></a>, or <a href="#Model-instance-destroy"><code>destroy</code></a>. If an attribute is passed, returns true only if that
specific attribute has changed.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-hasMany" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-hasMany">hasMany</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_model.js.html#line113" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>ForeignKey in the <code>Target</code> model. By default, the foreignKey is assumed to
  be the singular form of this model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model's table which <code>foreignKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>The <code>hasMany</code> relation specifies that this model has one or more rows in
another table which match on this model's primary key.</p>
<pre class="prettyprint source"><code>let Author = bookshelf.Model.extend({
  tableName: 'authors',
  books: function() {
    return this.hasMany(Book);
  }
});

// select * from `authors` where id = 1
// select * from `books` where author_id = 1
Author.where({id: 1}).fetch({withRelated: ['books']}).then(function(author) {
  console.log(JSON.stringify(author.related('books')));
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-hasOne" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-hasOne">hasOne</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line65" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>ForeignKey in the <code>Target</code> model. By default, the <code>foreignKey</code> is assumed to
  be the singular form of this model's <a href="#Model-instance-tableName"><code>tableName</code></a>,
  followed by <code>_id</code> / <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">foreignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model's table which <code>foreignKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>The <code>hasOne</code> relation specifies that this table has exactly one of another
type of object, specified by a foreign key in the other table.</p>
<pre class="prettyprint source"><code>let Record = bookshelf.Model.extend({
  tableName: 'health_records'
});

let Patient = bookshelf.Model.extend({
  tableName: 'patients',
  record: function() {
    return this.hasOne(Record);
  }
});

// select * from `health_records` where `patient_id` = 1;
new Patient({id: 1}).related('record').fetch().then(function(model) {
  // ...
});

// alternatively, if you don't need the relation loaded on the patient's relations hash:
new Patient({id: 1}).record().fetch().then(function(model) {
  // ...
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-isNew" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-isNew">isNew</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line336" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var modelA = new bookshelf.Model();
modelA.isNew(); // true

var modelB = new bookshelf.Model({id: 1});
modelB.isNew(); // false</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Checks for the existence of an id to determine whether the model is
considered &quot;new&quot;.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-load" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-load">load</a></span><span class="parenthesis">(</span><span class="item-name">relations</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>></span>
          </span
          ><a href="docs/src_model.js.html#line832" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>new Posts().fetch().then(function(collection) {
  collection.at(0)
  .load(['author', 'content', 'comments.tags'])
  .then(function(model) {
    JSON.stringify(model);
  });
});

{
  title: 'post title',
  author: {...},
  content: {...},
  comments: [
    {tags: [...]}, {tags: [...]}
  ]
}</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">relations</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>The relation, or relations, to be loaded.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>></code
>




<span class="param-desc">
  <p>A promise resolving to this <a href="#Model"><code>model</code></a></p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The load method takes an array of relations to eager load attributes onto a
<a href="#Model"><code>Model</code></a>, in a similar way that the <code>withRelated</code> property works on
<a href="#Model-instance-fetch"><code>fetch</code></a>. Dot separated attributes may be used to specify deep
eager loading.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-morphMany" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-morphMany">morphMany</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">name</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">morphValue</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_model.js.html#line361" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">name</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Prefix for <code>_id</code> and <code>_type</code> columns.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Array containing two column names, the first is the <code>_type</code>, the second is the <code>_id</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">morphValue</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">Target#<a href="#Model-instance-tableName"><code>tablename</code></a></span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The string value associated with this relationship. Stored in the <code>_type</code>
  column of the polymorphic table. Defaults to <code>Target</code>#<a href="#Model-instance-tableName"><code>  tablename</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>A collection of related models.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p><a href="#Model-instance-morphMany"><code>morphMany</code></a> is essentially the same as a <a href="#Model-instance-morphOne"><code>morphOne</code></a>, but creating a <a href="#Collection"><code>collection</code></a>
rather than a <a href="#Model"><code>model</code></a> (similar to a <a href="#Model-instance-hasOne"><code>hasOne</code></a> vs. <a href="#Model-instance-hasMany"><code>hasMany</code></a> relation).</p>
<p><a href="#Model-instance-morphMany"><code>morphMany</code></a> is used to signify a <code>one-to-many</code> or <code>many-to-many</code> <code>polymorphic relation</code> with another <code>Target</code> model, where the <code>name</code> of the
model is used to determine which database table keys are used. The naming
convention requires the <code>name</code> prefix an <code>_id</code> and <code>_type</code> field in the
database. So for the case below the table names would be <code>imageable_type</code>
and <code>imageable_id</code>. The <code>morphValue</code> may be optionally set to
store/retrieve a different value in the <code>_type</code> column than the <code>Target</code>'s
<a href="#Model-instance-tableName"><code>tableName</code></a>.</p>
<pre class="prettyprint source"><code>let Post = bookshelf.Model.extend({
  tableName: 'posts',
  photos: function() {
    return this.morphMany(Photo, 'imageable');
  }
});</code></pre><p>And with custom columnNames:</p>
<pre class="prettyprint source"><code>let Post = bookshelf.Model.extend({
  tableName: 'posts',
  photos: function() {
    return this.morphMany(Photo, 'imageable', [&quot;ImageableType&quot;, &quot;ImageableId&quot;]);
  }
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-morphOne" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-morphOne">morphOne</a></span><span class="parenthesis">(</span><span class="item-name">Target</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">name</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">morphValue</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line309" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">name</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Prefix for <code>_id</code> and <code>_type</code> columns.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Array containing two column names, the first is the <code>_type</code>, the second
  is the <code>_id</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">morphValue</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">Target#<a href="#Model-instance-tableName"><code>tableName</code></a></span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The string value associated with this relationship. Stored in the <code>_type</code>
  column of the polymorphic table. Defaults to <code>Target#<a href="#Model-instance-tableName"><code>tableName</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>The related model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <a href="#Model-instance-morphOne"><code>morphOne</code></a> is used to signify a <code>one-to-one</code> <code>polymorphic relation</code> with
another <code>Target</code> model, where the <code>name</code> of the model is used to determine
which database table keys are used. The naming convention requires the
<code>name</code> prefix an <code>_id</code> and <code>_type</code> field in the database. So for the case
below the table names would be <code>imageable_type</code> and <code>imageable_id</code>. The
<code>morphValue</code> may be optionally set to store/retrieve a different value in
the <code>_type</code> column than the <a href="#Model-instance-tableName"><code>Model#tableName</code></a>.</p>
<pre class="prettyprint source"><code>let Site = bookshelf.Model.extend({
  tableName: 'sites',
  photo: function() {
    return this.morphOne(Photo, 'imageable');
  }
});</code></pre><p>And with custom <code>columnNames</code>:</p>
<pre class="prettyprint source"><code>let Site = bookshelf.Model.extend({
  tableName: 'sites',
  photo: function() {
    return this.morphOne(Photo, 'imageable', [&quot;ImageableType&quot;, &quot;ImageableId&quot;]);
  }
});</code></pre><p>Note that both <code>columnNames</code> and <code>morphValue</code> are optional arguments. How
your argument is treated when only one is specified, depends on the type.
If your argument is an array, it will be assumed to contain custom
<code>columnNames</code>. If it's not, it will be assumed to indicate a <code>morphValue</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-morphTo" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-morphTo">morphTo</a></span><span class="parenthesis">(</span><span class="item-name">name</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="variable-ellipsis">&hellip;</span><span class="item-name">Target</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line413" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">name</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Prefix for <code>_id</code> and <code>_type</code> columns.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">columnNames</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Array containing two column names, the first is the <code>_type</code>, the second is the <code>_id</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="variable-ellipsis">&hellip;</span><span class="item-name">Target</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Constructor of <a href="#Model"><code>Model</code></a> targeted by join.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>The <a href="#Model-instance-morphTo"><code>morphTo</code></a> relation is used to specify the inverse
of the <a href="#Model-instance-morphOne"><code>morphOne</code></a> or <a href="#Model-instance-morphMany"><code>morphMany</code></a> relations, where the <code>targets</code> must be passed to signify which
<a href="#Model"><code>models</code></a> are the potential opposite end of the <code>polymorphic relation</code>.</p>
<pre class="prettyprint source"><code>let Photo = bookshelf.Model.extend({
  tableName: 'photos',
  imageable: function() {
    return this.morphTo('imageable', Site, Post);
  }
});</code></pre><p>And with custom columnNames:</p>
<pre class="prettyprint source"><code>let Photo = bookshelf.Model.extend({
  tableName: 'photos',
  imageable: function() {
    return this.morphTo('imageable', [&quot;ImageableType&quot;, &quot;ImageableId&quot;], Site, Post);
  }
});</code></pre><p>And with custom morphValues, the inverse of morphValue of
<a href="#Model-instance-morphOne"><code>morphOne</code></a> and <a href="#Model-instance-morphMany"><code>morphMany</code></a>,
where the <code>morphValues</code> may be optionally set to check against a
different value in the <code>_type</code> column than the <a href="#Model-instance-tableName"><code>Model#tableName</code></a>;
for example, a more descriptive name, or a name that betters adheres to
whatever standard you are using for models.</p>
<pre class="prettyprint source"><code>let Photo = bookshelf.Model.extend({
  tableName: 'photos',
  imageable: function() {
    return this.morphTo('imageable', [Site, &quot;favicon&quot;], [Post, &quot;cover_photo&quot;]);
  }
});</code></pre>
    </div>
  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Model-instance-off" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-off">off</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line48" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>customer.off('fetched fetching');
ship.off(); // This will remove all event listeners</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-off">Events#off</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Model-instance-on" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-on">on</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line37" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>customer.on('fetching', function(model, columns) {
  // Do something before the data is fetched from the database
});</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-on">Events#on</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-once" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-once">once</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="comma">, </span><span class="item-name">callback</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line104" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event or space separated list of events to register a
  callback for.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">callback</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        <p>That callback to invoke only once when the event is fired.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Just like <a href="#Events-instance-on"><code>Events#on</code></a>, but causes the bound callback to fire only
once before being removed. Handy for saying &quot;the next time that X happens,
do this&quot;. When multiple events are passed in using the space separated
syntax, the event will fire once for every event you passed in, not once
for a combination of all events.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-orderBy" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-orderBy">orderBy</a></span><span class="parenthesis">(</span><span class="item-name">sort</span><span class="comma">, </span><span class="item-name">order</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_model.js.html#line1312" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>Car.forge().orderBy('color', 'ASC').fetchAll()
   .then(function (rows) { // ...</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">sort</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column to sort on</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">order</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Ascending ('ASC') or descending ('DESC') order</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.9.3</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Specifies the column to sort on and sort order.</p>
<p>The order parameter is optional, and defaults to 'ASC'. You may
also specify 'DESC' order by prepending a hyphen to the sort column
name. <code>orderBy(&quot;date&quot;, 'DESC')</code> is the same as <code>orderBy(&quot;-date&quot;)</code>.</p>
<p>Unless specified using dot notation (i.e., &quot;table.column&quot;), the default
table will be the table name of the model <code>orderBy</code> was called on.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-parse" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-parse">parse</a></span><span class="parenthesis">(</span><span class="item-name">attributes</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_model.js.html#line476" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>// Example of a parser to convert snake_case to camelCase, using lodash
// This is just an example. You can use the built-in case-converter plugin
// to achieve the same functionality.
model.parse = function(attrs) {
  return _.mapKeys(attrs, function(value, key) {
    return _.camelCase(key);
  });
};</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attributes</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of attributes to parse.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>Parsed attributes.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>parse</code> method is called whenever a <a href="#Model"><code>model</code></a>'s data is
returned in a <a href="#Model-instance-fetch"><code>fetch</code></a> call. The function is passed the raw
database response object, and should return the <code>attributes</code> hash to be <a href="#Model-instance-set"><code>set</code></a> on the model. The default
implementation is a no-op, simply passing through the JSON response.
Override this if you need to format the database responses - for example
calling <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse</a> on a text field containing JSON, or explicitly typecasting a
boolean in a sqlite3 database response.</p>
<p>If you need to format your data before it is saved to the database, override
the <a href="#Model-instance-format"><code>format</code></a> method in your models. That method does the
opposite operation of <code>parse</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-previous" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-previous">previous</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  mixed</span>
          </span
          ><a href="docs/src_base_model.js.html#line692" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The attribute to check</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >mixed</code
>




<span class="param-desc">
  <p>The previous value</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Returns the this previous value of a changed <code>attribute</code>, or <code>undefined</code> if one had not been specified previously.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-previousAttributes" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-previousAttributes">previousAttributes</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_model.js.html#line707" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>The attributes as they were before the last change.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Return a copy of the <a href="#Model"><code>model</code></a>'s previous attributes from the
model's last <a href="#Model-instance-fetch"><code>fetch</code></a>, <a href="#Model-instance-save"><code>save</code></a>, or <a href="#Model-instance-destroy"><code>destroy</code></a>. Useful for getting a diff between versions of a
model, or getting back to a valid state after an error occurs.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-query" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-query">query</a></span><span class="parenthesis">(</span><span class="item-name">arguments</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a>|QueryBuilder</span>
          </span
          ><a href="docs/src_model.js.html#line1234" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>model
  .query('where', 'other_id', '=', '5')
  .fetch()
  .then(function(model) {
    // ...
  });

model
  .query({where: {other_id: '5'}, orWhere: {key: 'value'}})
  .fetch()
  .then(function(model) {
    // ...
  });

model.query(function(qb) {
  qb.where('other_person', 'LIKE', '%Demo').orWhere('other_id', '>', 10);
}).fetch()
  .then(function(model) {
    // ...
  });

let qb = model.query();
qb.where({id: 1}).select().then(function(resp) {
  // ...
});</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">arguments</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The query method.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="http://knexjs.org/#Builder">Knex `QueryBuilder`</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
><code class="type-or">|</code><code class="param-type"
  >QueryBuilder</code
>




<span class="param-desc">
  <p>Will return this model or, if called with no arguments, the underlying query builder.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>query</code> method is used to tap into the underlying Knex query builder
instance for the current model. If called with no arguments, it will
return the query builder directly. Otherwise, it will call the specified
method on the query builder, applying any additional arguments from the
<code>model.query</code> call. If the method argument is a function, it will be
called with the Knex query builder as the context and the first argument,
returning the current model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-refresh" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-refresh">refresh</a></span><span class="parenthesis">(</span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>></span>
          </span
          ><a href="docs/src_model.js.html#line566" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A hash of options. See <a href="#Model-instance-fetch"><code>Model#fetch</code></a> for details.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.8.2</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>></code
>




<span class="param-desc">
  <p>A promise resolving to this model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Update the attributes of a model, fetching it by its primary key. If no
attribute matches its <a href="#Model-instance-idAttribute"><code>idAttribute</code></a>, then fetch by
all available fields.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-related" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-related">related</a></span><span class="parenthesis">(</span><span class="item-name">name</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a>|<a href="#Collection">Collection</a>|undefined</span>
          </span
          ><a href="docs/src_base_model.js.html#line557" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>new Photo({id: 1}).fetch({
  withRelated: ['account']
}).then(function(photo) {
  if (photo) {
    var account = photo.related('account');
    if (account.id) {
       return account.related('trips').fetch();
    }
  }
});</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">name</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the relation to retrieve.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Collection">Collection</a></code
><code class="type-or">|</code><code class="param-type"
  >undefined</code
>




<span class="param-desc">
  <p>The specified relation as defined by a
  method on the model, or undefined if it does not exist.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>related</code> method returns a specified relation loaded on the relations
hash on the model, or calls the associated relation method and adds it to
the relations hash if one exists and has not yet been loaded.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-resetQuery" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-resetQuery">resetQuery</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line1221" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Used to reset the internal state of the current query builder instance.
 This method is called internally each time a database action is completed
 by <code>Sync</code></p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-save" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-save">save</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">key</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">val</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">attrs</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>></span>
          </span
          ><a href="docs/src_model.js.html#line872" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">key</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Attribute name.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">val</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Attribute value.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">attrs</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A hash of attributes.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">method</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Explicitly select a save method, either <code>&quot;update&quot;</code> or <code>&quot;insert&quot;</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">defaults</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Whether to assign or not <a href="#Model-instance-defaults"><code>default</code></a> attribute values
  on a model when performing an update or create operation.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">patch</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Only save attributes supplied in arguments to <code>save</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">true</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Throw a <a href="#Model-static-NoRowsUpdatedError"><code>Model.NoRowsUpdatedError</code></a> if no records are affected by save.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
    <h5>Fires</h5>
    <ul class="fired-event-list">
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-saving">"saving"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-creating">"creating"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-updating">"updating"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-created">"created"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-updated">"updated"</a></code>
        </li>
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Model-event-saved">"saved"</a></code>
        </li>
      
    </ul>
    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Model-static-NoRowsUpdatedError">Model.NoRowsUpdatedError</a></code
>


<div class="param-desc">

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>></code
>




<span class="param-desc">
  <p>A promise resolving to the saved and updated model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>This method is used to perform either an insert or update query using the
model's set <code>attributes</code>.</p>
<p>If the model <a href="#Model-instance-isNew"><code>isNew</code></a>, any <a href="#Model-instance-defaults"><code>defaults</code></a>
will be set and an <code>insert</code> query will be performed. Otherwise it will
<code>update</code> the record with a corresponding ID. It is also possible to
set default attributes on an <code>update</code> by passing the <code>{defaults: true}</code>
option in the second argument to the <code>save</code> call. This will also use the
same <a href="#Model-instance-defaults"><code>defaults</code></a> as the <code>insert</code> operation.</p>
<p>The type of operation to perform (either <code>insert</code> or <code>update</code>) can be
overriden with the <code>method</code> option:</p>
<pre class="prettyprint source"><code>// This forces an insert with the specified id instead of the expected
// update
new Post({name: 'New Article', id: 34})
  .save(null, {method: 'insert'})
  .then(function(model) {
    // ...
  });</code></pre><p>If you only wish to update with the params passed to the save, you may pass
a <code>{patch: true}</code> option in the second argument to <code>save</code>:</p>
<pre class="prettyprint source"><code>// UPDATE authors SET &quot;bio&quot; = 'Short user bio' WHERE &quot;id&quot; = 1
new Author({id: 1, first_name: 'User'})
  .save({bio: 'Short user bio'}, {patch: true})
  .then(function(model) {
    // ...
  });</code></pre><p>Several events fired on the model when saving: a <code>&quot;creating&quot;</code>, or <code>"updating"</code> event if the model is
being inserted or updated, and a &quot;saving&quot; event in either case. To
prevent saving the model (with validation, etc.), throwing an error inside
one of these event listeners will stop saving the model and reject the
promise. A <code>"created"</code>, or <code>Model#"updated"</code>
event is fired after the model is saved, as well as a <code>&quot;saved&quot;</code> event either way. If you wish to modify the query when the <code>&quot;saving&quot;</code> event is fired, the knex query object should is
available in <code>options.query</code>.</p>
<pre class="prettyprint source"><code>// Save with no arguments
Model.forge({id: 5, firstName: 'John', lastName: 'Smith'}).save().then(function() {
  //...
});

// Or add attributes during save
Model.forge({id: 5}).save({firstName: 'John', lastName: 'Smith'}).then(function() {
  //...
});

// Or, if you prefer, for a single attribute
Model.forge({id: 5}).save('name', 'John Smith').then(function() {
  //...
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-serialize" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-serialize">serialize</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_model.js.html#line369" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var artist = new bookshelf.Model({
  firstName: "Wassily",
  lastName: "Kandinsky"
});

artist.set({birthday: "December 16, 1866"});

console.log(JSON.stringify(artist));
// {firstName: "Wassily", lastName: "Kandinsky", birthday: "December 16, 1866"}</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">shallow</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Exclude relations.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">omitPivot</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Exclude pivot values.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>Serialized model as a plain object.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Return a copy of the model's <code>attributes</code> for JSON
stringification. If the <a href="#Model"><code>model</code></a> has any relations defined, this
will also call <a href="#Model-instance-toJSON"><code>toJSON</code></a> on each of the related
objects, and include them on the object unless <code>{shallow: true}</code> is
passed as an option.</p>
<p><code>serialize</code> is called internally by <a href="#Model-instance-toJSON"><code>toJSON</code></a>. Override
this function if you want to customize its output.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-set" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-set">set</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">value</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_model.js.html#line280" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>customer.set({first_name: "Joe", last_name: "Customer"});
customer.set("telephone", "555-555-1212");</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Attribute name, or hash of attribute names and values.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">value</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>If a string was provided for <code>attribute</code>, the value to be set.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">unset</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Remove attributes from the model instead of setting them.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>This model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Set a hash of attributes (one or many) on the model.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-through" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-through">through</a></span><span class="parenthesis">(</span><span class="item-name">Interim</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">throughForeignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">throughForeignKeyTarget</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_model.js.html#line484" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Interim</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Pivot model.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">throughForeignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in this model. By default, the <code>foreignKey</code> is assumed to
  be the singular form of the <code>Target</code> model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in the <code>Interim</code> model. By default, the <code>otherKey</code> is assumed to
  be the singular form of this model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">throughForeignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model which <code>throughForeignKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in this model which <code>otherKey</code> references, if other
  than <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>Helps to create dynamic relations between <a href="#Model"><code>models</code></a> and <a href="#Collection"><code>collections</code></a>, where a <a href="#Model-instance-hasOne"><code>hasOne</code></a>, <a href="#Model-instance-hasMany"><code>hasMany</code></a>, <a href="#Model-instance-belongsTo"><code>belongsTo</code></a>, or <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relation may run through a <code>JoinModel</code>.</p>
<p>A good example of where this would be useful is if a book <a href="#Model-instance-hasMany"><code>hasMany</code></a> paragraphs through chapters. Consider the following examples:</p>
<pre class="prettyprint source"><code>let Book = bookshelf.Model.extend({
  tableName: 'books',

  // Find all paragraphs associated with this book, by
  // passing through the &quot;Chapter&quot; model.
  paragraphs: function() {
    return this.hasMany(Paragraph).through(Chapter);
  },

  chapters: function() {
    return this.hasMany(Chapter);
  }
});

let Chapter = bookshelf.Model.extend({
  tableName: 'chapters',

  paragraphs: function() {
    return this.hasMany(Paragraph);
  }
});

let Paragraph = bookshelf.Model.extend({
  tableName: 'paragraphs',

  chapter: function() {
    return this.belongsTo(Chapter);
  },

  // A reverse relation, where we can get the book from the chapter.
  book: function() {
    return this.belongsTo(Book).through(Chapter);
  }
});</code></pre><p>The &quot;through&quot; table creates a pivot model, which it assigns to <code>model.pivot</code> after it is created. On <a href="#Model-instance-toJSON"><code>toJSON</code></a>, the pivot model is flattened to values prefixed with
<code>_pivot_</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-timestamp" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-timestamp">timestamp</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_model.js.html#line638" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">method</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Either <code>'insert'</code> or <code>'update'</code> to specify what kind of save the attribute
  update is for.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>A hash of timestamp attributes that were set.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Automatically sets the timestamp attributes on the model, if
<a href="#Model-instance-hasTimestamps"><code>hasTimestamps</code></a> is set to <code>true</code> or an array. It
checks if the model is new and sets the <code>created_at</code> and <code>updated_at</code>
attributes (or any other custom attribute names you have set) to the current
date. If the model is not new and is just being updated then only the
<code>updated_at</code> attribute gets automatically updated.</p>
<p>If the model contains any user defined <code>created_at</code> or <code>updated_at</code> values,
there won't be any automatic updated of these attributes and the user
supplied values will be used instead.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-toJSON" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-toJSON">toJSON</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line410" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options passed to <a href="#Model-instance-serialize"><code>Model#serialize</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Called automatically by <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON()_behavior"><code>JSON.stringify</code></a>. To customize serialization, override <a href="#Model-instance-serialize"><code>serialize</code></a>.</p>
    </div>
  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Model-instance-trigger" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-trigger">trigger</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_model.js.html#line58" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>ship.trigger('fetched');</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-trigger">Events#trigger</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-triggerThen" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-triggerThen">triggerThen</a></span><span class="parenthesis">(</span><span class="item-name">name</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line79" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">name</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The event name, or a whitespace-separated list of event names, to be
  triggered.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>Arguments to be passed to any registered event handlers.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            




<span class="param-desc">
  <p>Promise&lt;mixed[]&gt;
  A promise resolving the the resolved return values of any triggered handlers.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>A promise version of <a href="#Events-instance-trigger"><code>Events#trigger</code></a>, returning a promise which
resolves with all return values from triggered event handlers. If any of the
event handlers throw an <code>Error</code> or return a rejected promise, the promise
will be rejected. Used internally on the <code>"creating"</code>,
<code>"updating"</code>, <code>"saving"</code>, and <code>&quot;destroying&quot;</code> events, and can be helpful when needing async
event handlers (for validations, etc).</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-unset" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-unset">unset</a></span><span class="parenthesis">(</span><span class="item-name">attribute</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_model.js.html#line493" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attribute</span></code>

      

      <div class="description">
        <p>Attribute to unset.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>This model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Remove an attribute from the model. <code>unset</code> is a noop if the attribute
doesn't exist.</p>
<p>Note that unsetting an attribute from the model will not affect the related
record's column value when saving the model. In order to clear the value of a
column in the database record, set the attribute value to <code>null</code> instead:
<code>model.set(&quot;column_name&quot;, null)</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Model-instance-where" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-instance-where">where</a></span><span class="parenthesis">(</span><span class="item-name">method</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_model.js.html#line1282" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>model.where('favorite_color', '&lt;>', 'green').fetch().then(function() { //...
// or
model.where('favorite_color', 'red').fetch().then(function() { //...
// or
model.where({favorite_color: 'red', shoe_size: 12}).fetch().then(function() { //...</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">method</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Either <code>key, [operator], value</code> syntax, or a hash of attributes to
  match. Note that these must be formatted as they are in the database,
  not how they are stored after <a href="#Model-instance-parse"><code>Model#parse</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Model-instance-query">Model#query</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The where method is used as convenience for the most common <a href="#Model-instance-query"><code>query</code></a> method, adding a where clause to the builder. Any
additional knex methods may be accessed using <a href="#Model-instance-query"><code>query</code></a>.</p>
<p>Accepts either key, value syntax, or a hash of attributes.</p>
    </div>
  
</div>

          
        </div>
    

    
        <h3
          id="Model-subsection-lodash-methods"
          class="subsection-title"
        >Lodash Methods</h3>
        <ul class="lodash-methods">
          
              
<li id="Model-instance-invert" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#invert">invert</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Model-instance-keys" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#keys">keys</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Model-instance-omit" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#omit">omit</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Model-instance-pick" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#pick">pick</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Model-instance-toPairs" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#toPairs">toPairs</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Model-instance-values" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#values">values</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
        </ul>
    

    

    
        <h3
          id="Model-subsection-events"
          class="subsection-title"
        >Events</h3>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-counting" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-counting">"counting"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_sync.js.html#line86" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-count"><code>count</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Counting event.</p>
<p>Fired before a <code>count</code> query. A promise may be
returned from the event handler for async behaviour.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-created" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-created">"created"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">newId</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1113" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">newId</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Array</code
>
</span></code>
      

      <div class="description">
        <p>A list containing the id of the newly created model.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Created event.</p>
<p>Fired after an <code>insert</code> query.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-creating" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-creating">"creating"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">attrs</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1031" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">attrs</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Attributes that will be inserted.</p>
<p>  <strong>Note</strong>: There's currently a bug that leads to attrs only
  containing attributes that were passed as argument to
  <a href="#Model-instance-save"><code>save</code></a>. You can work around this by accessing
  <code>model.changed</code> which does contain all the attributes that will be
  inserted.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Creating event.</p>
<p>Fired before <code>insert</code> query. A promise may be
returned from the event handler for async behaviour. Throwing an
exception from the handler will cancel the save operation.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-destroyed" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-destroyed">"destroyed"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1206" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-destroy"><code>destroy</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Destroyed event.</p>
<p>Fired after a <code>delete</code> query. A promise may be returned from the event
handler for async behaviour.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-destroying" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-destroying">"destroying"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1185" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-destroy"><code>destroy</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Destroying event.</p>
<p>Fired before a <code>delete</code> query. A promise may be returned from the event
handler for async behaviour. Throwing an exception from the handler
will reject the promise and cancel the deletion.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-fetched" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-fetched">"fetched"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">response</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line710" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">response</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Knex query response.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-fetch"><code>fetch</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>




<span class="param-desc">
  <p>If the handler returns a promise, <code>fetch</code> will wait for it to
  be resolved.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Fired after a <code>fetch</code> operation. A promise may be returned from the
event handler for async behaviour.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-fetching" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-fetching">"fetching"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">columns</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_sync.js.html#line173" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model which is about to be fetched.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">columns</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>The columns to be retrieved by the query.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-fetch"><code>fetch</code></a>.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">query</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >QueryBuilder</code
>
</span></code>
      

      <div class="description">
        <p>Query builder to be used for fetching. This can be modified to
  change the query before it is executed.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Fired before a <code>fetch</code> operation. A promise may be returned from the
event handler for async behaviour.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-saved" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-saved">"saved"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">response</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1098" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">response</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Array</code
><code class="type-or">|</code><code class="param-type"
  >Number</code
>
</span></code>
      

      <div class="description">
        <p>A list containing the id of the newly created model in case of an
  <code>insert</code> or a number representing the affected rows in the case of
  an <code>update</code> query.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Saved event.</p>
<p>Fired after an <code>insert</code> or <code>update</code> query.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-saving" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-saving">"saving"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">attrs</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1008" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event. Its attributes are already changed but
  not commited to the database yet.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">attrs</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Attributes that will be inserted or updated.</p>
<p>  <strong>Note</strong>: There's currently a bug that leads to attrs only
  containing attributes that were passed as argument to
  <a href="#Model-instance-save"><code>save</code></a>. You can work around this by accessing
  <code>model.changed</code> which does contain all the attributes that will be
  inserted or updated.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Saving event.</p>
<p>Fired before an <code>insert</code> or <code>update</code> query. A promise may be
returned from the event handler for async behaviour. Throwing an
exception from the handler will cancel the save.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-updated" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-updated">"updated"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">affectedRows</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1125" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">affectedRows</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Number</code
>
</span></code>
      

      <div class="description">
        <p>Number of rows affected by the update.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Updated event.</p>
<p>Fired after an <code>update</code> query.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-event-updating" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-event-updating">"updating"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="item-name">attrs</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line1052" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The model firing the event. Its attributes are already changed but
  not commited to the database yet.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">attrs</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Attributes that will be updated.</p>
<p>  <strong>Note</strong>: There's currently a bug that leads to attrs only
  containing attributes that were passed as argument to
  <a href="#Model-instance-save"><code>save</code></a>. You can work around this by accessing
  <code>model.changed</code> which does contain all the attributes that will be
  updated.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-save"><code>save</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Updating event.</p>
<p>Fired before <code>update</code> query. A promise may be
returned from the event handler for async behaviour. Throwing an
exception from the handler will cancel the save operation.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-fetched:collection" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-instance-fetched:collection">"fetched:collection"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">collection</span><span class="comma">, </span><span class="item-name">resp</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line817" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">collection</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The collection that has been fetched.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">resp</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>The Knex query response.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-fetchAll"><code>fetchAll</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Fired after a <a href="#Model-instance-fetchAll"><code>fetchAll</code></a> operation. A promise
may be returned from the event handler for async behaviour.</p>
    </div>
  
</div>

        
            
<div class="method has-description">
    

        <h4 id="Model-instance-fetching:collection" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >model</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Model-instance-fetching:collection">"fetching:collection"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">collection</span><span class="comma">, </span><span class="item-name">columns</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_model.js.html#line804" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">collection</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>The collection that has been fetched.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">columns</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>The columns being retrieved by the query.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Model-instance-fetchAll"><code>fetchAll</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Fired before a <a href="#Model-instance-fetchAll"><code>fetchAll</code></a> operation. A promise
may be returned from the event handler for async behaviour.</p>
    </div>
  
</div>

        
    
</article>


    




<header>
    
        <h2 id="section-Model-static-NoRowsDeletedError">
            <span class="ancestors"><a href="#Model">Model</a>.</span
        >NoRowsDeletedError</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Model-static-NoRowsDeletedError-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Model-static-NoRowsDeletedError" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-NoRowsDeletedError">NoRowsDeletedError</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_model.js.html#line1436" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Thrown when no record is deleted by <a href="#Model-instance-destroy"><code>destroy</code></a>
  if called with the <code>{require: true}</code> option.</p>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    

    

    

    

    

    
</article>



</section>







<header>
    
        <h2 id="section-Model-static-NoRowsUpdatedError">
            <span class="ancestors"><a href="#Model">Model</a>.</span
        >NoRowsUpdatedError</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Model-static-NoRowsUpdatedError-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Model-static-NoRowsUpdatedError" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-NoRowsUpdatedError">NoRowsUpdatedError</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_model.js.html#line1427" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Thrown when no records are saved by <a href="#Model-instance-save"><code>save</code></a>
  unless called with the <code>{require: false}</code> option.</p>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    

    

    

    

    

    
</article>



</section>







<header>
    
        <h2 id="section-Model-static-NotFoundError">
            <span class="ancestors"><a href="#Model">Model</a>.</span
        >NotFoundError</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Model-static-NotFoundError-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Model-static-NotFoundError" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="member-of"
                ><span class="class-name"
                  >Model</span
                >.</span><span class="parameters"><span class="name"><a href="#Model-static-NotFoundError">NotFoundError</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_model.js.html#line1417" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Thrown when no records are found by <a href="#Model-instance-fetch"><code>fetch</code></a> or
  <a href="#Model-instance-refresh"><code>Model#refresh</code></a> when called with the
  <code>{require: true}</code> option.</p>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    

    

    

    

    

    
</article>



</section>






</section>







<header>
    
        <h2 id="section-Collection">Collection</h2>
        
            <div class="class-description"><p>Collections are ordered sets of models returned from the database, from a
<a href="#Model-instance-fetchAll"><code>fetchAll</code></a> call. They may be used with a suite of
<a href="http://lodash.com/">Lodash</a> methods.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Collection-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Collection" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="parameters"><span class="name"><a href="#Collection">Collection</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_collection.js.html#line10" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>let tabs = new TabSet([tab1, tab2, tab3]);</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a>[]</code
>
</span></code>
      

      <div class="description">
        <p>Initial array of models.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">comparator</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p><code>Comparator</code> for collection, or <code>false</code> to disable sorting.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>When creating a <a href="#Collection"><code>Collection</code></a>, you may choose to pass in the initial
array of <a href="#Model"><code>models</code></a>. The collection's <code>comparator</code> may be included as an option. Passing <code>false</code> as the comparator
option will prevent sorting. If you define an <a href="#Collection-instance-initialize"><code>initialize</code></a> function, it will be invoked when the collection is created.</p>
    </div>
  
</div>

        
          
<div class="method has-description">
    

        <h4 id="Collection-instance-initialize" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-initialize">initialize</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line86" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Collection">Collection</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Called by the <a href="#Collection"><code>Collection constructor</code></a> when creating a new instance.
Override this function to add custom initialization, such as event listeners.
Because plugins may override this method in subclasses, make sure to call
your super (extended) class.  e.g.</p>
<pre class="prettyprint source"><code>initialize: function() {
    this.constructor.__super__.initialize.apply(this, arguments);
    // Your initialization code ...
}</code></pre>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    
        <h3 id="Collection-subsection-static" class="subsection-title">Static</h3>
        <div class="statics">
          
              
<div class="method has-description">
    

        <h4 id="Collection-static-extend" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-static-extend">extend</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">prototypeProperties</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">classProperties</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  function</span>
          </span
          ><a href="docs/src_base_collection.js.html#line775" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">prototypeProperties</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Instance methods and properties to be attached to instances of the new
  class.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">classProperties</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Class (ie. static) functions and properties to be attached to the
  constructor of the new class.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >function</code
>




<span class="param-desc">
  <p>Constructor for new <code>Collection</code> subclass.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>To create a <a href="#Collection"><code>Collection</code></a> class of your own, extend
<code>Bookshelf.Collection</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-static-forge" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >Collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-static-forge">forge</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_bookshelf.js.html#line135" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var Promise = require('bluebird');
var Accounts = bookshelf.Collection.extend({
  model: Account
});

var accounts = Accounts.forge([
  {name: 'Person1'},
  {name: 'Person2'}
]);

Promise.all(accounts.invokeMap('save')).then(function() {
  // collection models should now be saved...
});</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">models</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
>
</span></code>
      

      <div class="description">
        <p>Set of models (or attribute hashes) with which to initialize the
  collection.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>A simple helper function to instantiate a new Collection without needing
new.</p>
    </div>
  
</div>

          
        </div>
    

    

    
        <h3
          id="Collection-subsection-methods"
          class="subsection-title"
        >Methods</h3>
        <div class="methods">
          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-add" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-add">add</a></span><span class="parenthesis">(</span><span class="item-name">models</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_base_collection.js.html#line364" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>const ships = new bookshelf.Collection;

ships.add([
  {name: "Flying Dutchman"},
  {name: "Black Pearl"}
]);</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">models</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>One or more models or raw
attribute objects.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>See description.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Add a <a href="#Model"><code>model</code></a> (or an array of models) to the collection, You may
also pass raw attributes objects, and have them be vivified as instances of
the model. Pass <code>{at: index}</code> to splice the model into the collection at the
specified <code>index</code>. If you're adding models to the collection that are already
in the collection, they'll be ignored, unless you pass <code>{merge: true}</code>, in
which case their <code>attributes</code> will be merged into the
corresponding models.</p>
<p><em>Note that adding the same model (a model with the same id) to a collection
more than once is a no-op.</em></p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-at" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-at">at</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line501" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Get a model from a collection, specified by index. Useful if your collection
is sorted, and if your collection isn't sorted, <code>at</code> will still retrieve
models in insertion order.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-attach" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-attach">attach</a></span><span class="parenthesis">(</span><span class="item-name">ids</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Collection">Collection</a>></span>
          </span
          ><a href="docs/src_relation.js.html#line521" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">ids</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
><code class="type-or">|</code><code class="param-type"
  >mixed[]</code
>
</span></code>
      

      <div class="description">
        <p>One or more ID values or models to be attached to the relation.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">transacting</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Collection">Collection</a>></code
>




<span class="param-desc">
  <p>A promise resolving to the updated Collection where this method was called.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Attaches one or more <code>ids</code> or models from a foreign table to the current
table, on a <a href="#many-to-many">many-to-many</a> relation. Creates and saves a new
model and attaches the model with the related model.</p>
<pre class="prettyprint source"><code>var admin1 = new Admin({username: 'user1', password: 'test'});
var admin2 = new Admin({username: 'user2', password: 'test'});

Promise.all([admin1.save(), admin2.save()])
  .then(function() {
    return Promise.all([
    new Site({id: 1}).admins().attach([admin1, admin2]),
    new Site({id: 2}).admins().attach(admin2)
  ]);
})</code></pre><p>This method (along with <a href="#Collection-instance-detach"><code>Collection#detach</code></a> and <a href="#Collection-instance-updatePivot"><code>Collection#updatePivot</code></a>) are mixed in to a <a href="#Collection"><code>Collection</code></a> when
returned by a <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relation.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-clone" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-clone">clone</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line583" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Create a new collection with an identical list of models as this one.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-count" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-count">count</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">column</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<Number></span>
          </span
          ><a href="docs/src_collection.js.html#line156" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>// select count(*) from shareholders where company_id = 1 and share &amp;gt; 0.1;
Company.forge({id:1})
  .shareholders()
  .query('where', 'share', '>', '0.1')
  .count()
  .then(function(count) {
    assert(count === 3);
  });</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">column</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">'*'</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Specify a column to count - rows with null values in this column will be excluded.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.8.2</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<Number></code
>




<span class="param-desc">
  <p>A promise resolving to the number of matching rows.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Get the number of records in the collection's table.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-create" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-create">create</a></span><span class="parenthesis">(</span><span class="item-name">model</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>></span>
          </span
          ><a href="docs/src_collection.js.html#line255" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A set of attributes to be set on the new model.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>></code
>




<span class="param-desc">
  <p>A promise resolving with the new <code>model</code>.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Convenience method to create a new <a href="#Model"><code>model</code></a> instance within a
collection. Equivalent to instantiating a model with a hash of <code>attributes</code>, <a href="#Model-instance-save"><code>saving</code></a> the model to the
database then adding the model to the collection.</p>
<p>When used on a relation, <code>create</code> will automatically set foreign key
attributes before persisting the <code>Model</code>.</p>
<pre class="prettyprint source"><code>const { courses, ...attributes } = req.body;

Student.forge(attributes).save().tap(student =>
  Promise.map(courses, course => student.related('courses').create(course))
).then(student =>
  res.status(200).send(student)
).catch(error =>
  res.status(500).send(error.message)
);</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-detach" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-detach">detach</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">ids</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<undefined></span>
          </span
          ><a href="docs/src_relation.js.html#line561" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">ids</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
><code class="type-or">|</code><code class="param-type"
  >mixed[]</code
>
</span></code>
      

      <div class="description">
        <p>One or more ID values or models to be detached from the relation.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">transacting</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<undefined></code
>




<span class="param-desc">
  <p>A promise resolving to the updated Collection where this method was called.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Detach one or more related objects from their pivot tables. If a model or
id is passed, it attempts to remove from the pivot table based on that
foreign key. If no parameters are specified, we assume we will detach all
related associations.</p>
<p>This method (along with <a href="#Collection-instance-attach"><code>Collection#attach</code></a> and <a href="#Collection-instance-updatePivot"><code>Collection#updatePivot</code></a>) are mixed in to a <a href="#Collection"><code>Collection</code></a> when returned
by a <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relation.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-fetch" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-fetch">fetch</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Collection">Collection</a>></span>
          </span
          ><a href="docs/src_collection.js.html#line77" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Trigger a <a href="#Collection-static-EmptyError"><code>Collection.EmptyError</code></a> if no records are found.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">withRelated</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">[]</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>A relation, or list of relations, to be eager loaded as part of the <code>fetch</code> operation.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
    <h5>Fires</h5>
    <ul class="fired-event-list">
      
        <li class="fired-event-item">
          <code class="event-name"><a href="#Collection-event-fetched">"fetched"</a></code>
        </li>
      
    </ul>
    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Collection-static-EmptyError">Collection.EmptyError</a></code
>


<div class="param-desc">

    <p>Upon a sucessful query resulting in no records returns. Only fired if <code>require: true</code> is passed as an option.</p>

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Collection">Collection</a>></code
>





        
  </div>

  
    <div class="item-description">
        <p>Fetch the default set of models for this collection from the database,
resetting the collection when they arrive. If you wish to trigger an error
if the fetched collection is empty, pass <code>{require: true}</code> as one of the
options to the <a href="#Collection-instance-fetch"><code>fetch</code></a> call. A <code>&quot;fetched&quot;</code> event will be fired when records are
successfully retrieved. If you need to constrain the query performed by
<code>fetch</code>, you can call the <a href="#Collection-instance-query"><code>query</code></a> method before
calling <code>fetch</code>.</p>
<p><em>If you'd like to only fetch specific columns, you may specify a <code>columns</code>
property in the options for the <code>fetch</code> call.</em></p>
<p>The <code>withRelated</code> option may be specified to fetch the models of the
collection, eager loading any specified <code>relations</code> named on
the model. A single property, or an array of properties can be specified as
a value for the <code>withRelated</code> property. The results of these relation
queries will be loaded into a relations property on the respective models,
may be retrieved with the <a href="#Model-instance-related"><code>related</code></a> method.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-fetchOne" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-fetchOne">fetchOne</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Model">Model</a>|null></span>
          </span
          ><a href="docs/src_collection.js.html#line190" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>// select * from authors where site_id = 1 and id = 2 limit 1;
new Site({id:1})
  .authors()
  .query({where: {id: 2}})
  .fetchOne()
  .then(function(model) {
    // ...
  });</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>If <code>true</code>, will reject the returned response with a <a href="#Model-static-NotFoundError"><code>NotFoundError</code></a> if no result is found.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">columns</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">'*'</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Limit the number of columns fetched.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">transacting</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    
    <h5>Throws</h5>
    
            

  <code class="param-type"
  ><a href="#Model-static-NotFoundError">Model.NotFoundError</a></code
>


<div class="param-desc">

</div>

        

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Model">Model</a>|null></code
>




<span class="param-desc">
  <p>A promise resolving to the fetched <a href="#Model"><code>model</code></a> or <code>null</code> if none exists.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Fetch and return a single <a href="#Model"><code>model</code></a> from the collection,
maintaining any <code>relation</code> data from the collection, and
any <a href="#Collection-instance-query"><code>query</code></a> parameters that have already been passed
to the collection. Especially helpful on relations, where you would only
like to return a single model from the associated collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-findWhere" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-findWhere">findWhere</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_collection.js.html#line528" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>The first matching model.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Return the first model with matching attributes. Useful for simple cases of
<code>find</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-get" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-get">get</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a></span>
          </span
          ><a href="docs/src_base_collection.js.html#line489" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>const book = library.get(110);</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
>




<span class="param-desc">
  <p>The model, or <code>undefined</code> if it is not in the collection.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Get a model from a collection, specified by an <code>id</code>, a <code>cid</code>, or by passing in a <a href="#Model"><code>model</code></a>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-invokeThen" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-invokeThen">invokeThen</a></span><span class="parenthesis">(</span><span class="item-name">method</span><span class="comma">, </span><span class="variable-ellipsis">&hellip;</span><span class="item-name">arguments</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<mixed[]></span>
          </span
          ><a href="docs/src_base_collection.js.html#line311" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">method</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The <a href="#Model"><code>model</code></a> method to invoke.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="variable-ellipsis">&hellip;</span><span class="item-name">arguments</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>Arguments to <code>method</code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<mixed[]></code
>




<span class="param-desc">
  <p>Promise resolving to array of results from invocation.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Shortcut for calling <code>Promise.all</code> around a <code>Collection#invoke</code>, this
will delegate to the collection's <code>invoke</code> method, resolving the promise with
an array of responses all async (and sync) behavior has settled. Useful for
bulk saving or deleting models:</p>
<pre class="prettyprint source"><code>collection.invokeThen('save', null, options).then(function() {
  // ... all models in the collection have been saved
});

collection.invokeThen('destroy', options).then(function() {
  // ... all models in the collection have been destroyed
});</code></pre>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-load" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-load">load</a></span><span class="parenthesis">(</span><span class="item-name">relations</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<<a href="#Collection">Collection</a>></span>
          </span
          ><a href="docs/src_collection.js.html#line232" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">relations</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
><code class="type-or">|</code><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>The relation, or relations, to be loaded.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<<a href="#Collection">Collection</a>></code
>




<span class="param-desc">
  <p>A promise resolving to this <a href="#Collection"><code>collection</code></a></p>
</span>


        
  </div>

  
    <div class="item-description">
        <p><code>load</code> is used to eager load relations onto a Collection, in a similar way
that the <code>withRelated</code> property works on <a href="#Collection-instance-fetch"><code>fetch</code></a>.
Nested eager loads can be specified by separating the nested relations with
<code>'.'</code>.</p>
    </div>
  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Collection-instance-off" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-off">off</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line43" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>ships.off('fetched') // Remove the 'fetched' event listener</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-off">Events#off</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Collection-instance-on" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-on">on</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line31" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>const ships = new bookshelf.Collection;
ships.on('fetched', function(collection, response) {
  // Do something after the data has been fetched from the database
})</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-on">Events#on</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-once" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-once">once</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="comma">, </span><span class="item-name">callback</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line104" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event or space separated list of events to register a
  callback for.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">callback</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        <p>That callback to invoke only once when the event is fired.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Just like <a href="#Events-instance-on"><code>Events#on</code></a>, but causes the bound callback to fire only
once before being removed. Handy for saying &quot;the next time that X happens,
do this&quot;. When multiple events are passed in using the space separated
syntax, the event will fire once for every event you passed in, not once
for a combination of all events.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-orderBy" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-orderBy">orderBy</a></span><span class="parenthesis">(</span><span class="item-name">sort</span><span class="comma">, </span><span class="item-name">order</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_collection.js.html#line366" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>Cars.forge().orderBy('color', 'ASC').fetch()
   .then(function (rows) { // ...</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">sort</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column to sort on</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">order</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Ascending ('ASC') or descending ('DESC') order</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since</dt>
    <dd class="tag-since"><ul class="dummy"><li>0.9.3</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Specifies the column to sort on and sort order.</p>
<p>The order parameter is optional, and defaults to 'ASC'. You may
also specify 'DESC' order by prepending a hyphen to the sort column
name. <code>orderBy(&quot;date&quot;, 'DESC')</code> is the same as <code>orderBy(&quot;-date&quot;)</code>.</p>
<p>Unless specified using dot notation (i.e., &quot;table.column&quot;), the default
table will be the table name of the model <code>orderBy</code> was called on.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-parse" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-parse">parse</a></span><span class="parenthesis">(</span><span class="item-name">resp</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line574" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">resp</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
>
</span></code>
      

      <div class="description">
        <p>Raw database response array.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>The <code>parse</code> method is called whenever a collection's data is returned in a
<a href="#Collection-instance-fetch"><code>fetch</code></a> call. The function is passed the raw
database <code>response</code> array, and should return an array to be set on the
collection. The default implementation is a no-op, simply passing through
the JSON response.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-pluck" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-pluck">pluck</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  mixed[]</span>
          </span
          ><a href="docs/src_base_collection.js.html#line559" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >mixed[]</code
>




<span class="param-desc">
  <p>An array of attribute values.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Pluck an attribute from each model in the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-pop" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-pop">pop</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line441" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Remove a model from the end of the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-push" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-push">push</a></span><span class="parenthesis">(</span><span class="item-name">model</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_base_collection.js.html#line432" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">model</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>One or more models or raw
attribute objects.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Add a model to the end of the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-query" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-query">query</a></span><span class="parenthesis">(</span><span class="item-name">arguments</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a>|QueryBuilder</span>
          </span
          ><a href="docs/src_collection.js.html#line324" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>let qb = collection.query();
    qb.where({id: 1}).select().then(function(resp) {
      // ...
    });

collection.query(function(qb) {
  qb.where('id', '>', 5).andWhere('first_name', '=', 'Test');
}).fetch()
  .then(function(collection) {
    // ...
  });

collection
  .query('where', 'other_id', '=', '5')
  .fetch()
  .then(function(collection) {
    // ...
  });</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">arguments</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The query method.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="http://knexjs.org/#Builder">Knex `QueryBuilder`</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
><code class="type-or">|</code><code class="param-type"
  >QueryBuilder</code
>




<span class="param-desc">
  <p>Will return this model or, if called with no arguments, the underlying query builder.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p><code>query</code> is used to tap into the underlying Knex query builder instance for
the current collection. If called with no arguments, it will return the
query builder directly. Otherwise, it will call the specified <code>method</code> on
the query builder, applying any additional arguments from the
<code>collection.query</code> call. If the <code>method</code> argument is a function, it will be
called with the Knex query builder as the context and the first argument.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-reduceThen" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-reduceThen">reduceThen</a></span><span class="parenthesis">(</span><span class="item-name">iterator</span><span class="comma">, </span><span class="item-name">initialValue</span><span class="comma">, </span><span class="item-name">context</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<mixed[]></span>
          </span
          ><a href="docs/src_base_collection.js.html#line327" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">iterator</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">initialValue</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">context</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Bound to <code>this</code> in the <code>iterator</code> callback.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce%20"> MDN `Array.prototype.reduce` reference.</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<mixed[]></code
>




<span class="param-desc">
  <p>Promise resolving to array of results from invocation.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Run &quot;reduce&quot; over the models in the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-remove" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-remove">remove</a></span><span class="parenthesis">(</span><span class="item-name">models</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a>|<a href="#Model">Model</a>[]</span>
          </span
          ><a href="docs/src_base_collection.js.html#line380" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">models</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
>
</span></code>
      

      <div class="description">
        <p>The model, or models, to be removed.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a></code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
>




<span class="param-desc">
  <p>The same value passed as <code>models</code> argument.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Remove a <a href="#Model"><code>model</code></a> (or an array of models) from the collection,
but does not remove the model from the database, use the model's <a href="#Model-instance-destroy"><code>destroy</code></a> method for this.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-reset" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-reset">reset</a></span><span class="parenthesis">(</span><span class="item-name">models</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a>[]</span>
          </span
          ><a href="docs/src_base_collection.js.html#line415" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">models</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>One or more models or raw
attribute objects.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>See <a href="#Collection-instance-add"><code>add</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a>[]</code
>




<span class="param-desc">
  <p>Array of models.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Adding and removing models one at a time is all well and good, but sometimes
you have so many models to change that you'd rather just update the
collection in bulk. Use <code>reset</code> to replace a collection with a new list of
models (or attribute hashes). Calling <code>collection.reset()</code> without passing
any models as arguments will empty the entire collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-resetQuery" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-resetQuery">resetQuery</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_collection.js.html#line310" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Used to reset the internal state of the current query builder instance.
This method is called internally each time a database action is completed
by <code>Sync</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-serialize" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-serialize">serialize</a></span><span class="parenthesis">(</span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Object</span>
          </span
          ><a href="docs/src_base_collection.js.html#line148" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">shallow</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Exclude relations.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">omitPivot</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Exclude pivot values.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">omitNew</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Exclude models that return true for isNew.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Object</code
>




<span class="param-desc">
  <p>Serialized model as a plain object.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Return a raw array of the collection's <code>attributes</code> for JSON stringification. If the <a href="#Model"><code>models</code></a> have any
relations defined, this will also call <a href="#Model-instance-toJSON"><code>toJSON</code></a> on
each of the related objects, and include them on the object unless
<code>{shallow: true}</code> is passed as an option.</p>
<p><code>serialize</code> is called internally by <a href="#Collection-instance-toJSON"><code>toJSON</code></a>.
Override this function if you want to customize its output.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-set" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-set">set</a></span><span class="parenthesis">(</span><span class="item-name">models</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_base_collection.js.html#line189" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>var vanHalen = new bookshelf.Collection([eddie, alex, stone, roth]);
vanHalen.set([eddie, alex, stone, hagar]);</code></pre>

      </div>
    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">models</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object[]</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a>[]</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
><code class="type-or">|</code><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>One or more models or raw
attribute objects.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>See description.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The set method performs a &quot;smart&quot; update of the collection with the passed
model or list of models. If a model in the list isn't yet in the
collection it will be added; if the model is already in the collection
its attributes will be merged; and if the collection contains any models
that aren't present in the list, they'll be removed. If you'd like to
customize the behavior, you can disable it with options: <code>{add: false}</code>,
<code>{remove: false}</code>, or <code>{merge: false}</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-shift" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-shift">shift</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line461" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Remove a model from the beginning of the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-slice" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-slice">slice</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line472" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Slice out a sub-array of models from the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-through" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-through">through</a></span><span class="parenthesis">(</span><span class="item-name">Interim</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">throughForeignKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">throughForeignKeyTarget</span><span class="optional-bracket">]</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_collection.js.html#line39" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Interim</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Model">Model</a></code
>
</span></code>
      

      <div class="description">
        <p>Pivot model.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">throughForeignKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in this collection model. By default, the <code>foreignKey</code> is assumed to
  be the singular form of the <code>Target</code> model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKey</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Foreign key in the <code>Interim</code> model. By default, the <code>otherKey</code> is assumed to
  be the singular form of this model's tableName, followed by <code>_id</code> /
  <code>_{{<a href="#Model-instance-idAttribute"><code>idAttribute</code></a>}}</code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">throughForeignKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in the <code>Target</code> model which <code>throughForeignKey</code> references, if other
  than <code>Target</code> model's <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">otherKeyTarget</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>Column in this collection model which <code>otherKey</code> references, if other
  than <code>id</code> / <code><a href="#Model-instance-idAttribute"><code>idAttribute</code></a></code>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>





        
  </div>

  
    <div class="item-description">
        <p>Used to define passthrough relationships - <code>hasOne</code>, <code>hasMany</code>, <code>belongsTo</code>
or <code>belongsToMany</code>, &quot;through&quot; an <code>Interim</code> model or collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-toJSON" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-toJSON">toJSON</a></span><span class="parenthesis">(</span><span class="item-name">Options</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line163" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">Options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >options</code
>
</span></code>
      

      <div class="description">
        <p>passed to <a href="#Collection-instance-serialize"><code>Collection#serialize</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Called automatically by <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON()_behavior"><code>JSON.stringify</code></a>. To customize serialization, override <a href="#Collection-instance-serialize"><code>serialize</code></a>.</p>
    </div>
  
</div>

          
              
<div class="method no-description">
    

        <h4 id="Collection-instance-trigger" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-trigger">trigger</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line52" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    
      <div class="example">
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>ships.trigger('fetched')</code></pre>

      </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="#Events-instance-trigger">Events#trigger</a></li>
        </ul>
    </dd>
    

    
</dl>


    

    

    

    

    

    
  </div>

  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-triggerThen" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-triggerThen">triggerThen</a></span><span class="parenthesis">(</span><span class="item-name">name</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line79" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">name</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The event name, or a whitespace-separated list of event names, to be
  triggered.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>Arguments to be passed to any registered event handlers.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            




<span class="param-desc">
  <p>Promise&lt;mixed[]&gt;
  A promise resolving the the resolved return values of any triggered handlers.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>A promise version of <a href="#Events-instance-trigger"><code>Events#trigger</code></a>, returning a promise which
resolves with all return values from triggered event handlers. If any of the
event handlers throw an <code>Error</code> or return a rejected promise, the promise
will be rejected. Used internally on the <code>"creating"</code>,
<code>"updating"</code>, <code>"saving"</code>, and <code>&quot;destroying&quot;</code> events, and can be helpful when needing async
event handlers (for validations, etc).</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-unshift" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-unshift">unshift</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_collection.js.html#line452" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Add a model to the beginning of the collection.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-updatePivot" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-updatePivot">updatePivot</a></span><span class="parenthesis">(</span><span class="item-name">attributes</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  Promise<Number></span>
          </span
          ><a href="docs/src_relation.js.html#line591" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">attributes</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Values to be set in the <code>update</code> query.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">options</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>A hash of options.</p>
        
          

<ul class="params">
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">query</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
><code class="type-or">|</code><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Constrain the update query. Similar to the <code>method</code> argument to <a href="#Model-instance-query"><code>Model#query</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">require</span><span class="default-value"><span class="default-equals">=</span><span class="default-value">false</span></span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Boolean</code
>
</span></code>
      

      <div class="description">
        <p>Causes promise to be rejected with an Error if no rows were updated.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="item-name">transacting</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Transaction</code
>
</span></code>
      

      <div class="description">
        <p>Optionally run the query in a transaction.</p>
        
      </div>

    </li>
  
</ul>

        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise<Number></code
>




<span class="param-desc">
  <p>A promise resolving to number of rows updated.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>updatePivot</code> method is used exclusively on <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relations, and allows for updating pivot rows on the joining
table.</p>
<p>This method (along with <a href="#Collection-instance-attach"><code>Collection#attach</code></a> and <a href="#Collection-instance-detach"><code>Collection#detach</code></a>) are mixed in to a <a href="#Collection"><code>Collection</code></a> when returned
by a <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relation.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-where" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-where">where</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Model">Model</a>[]</span>
          </span
          ><a href="docs/src_base_collection.js.html#line511" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Model">Model</a>[]</code
>




<span class="param-desc">
  <p>Array of matching models.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>Return models with matching attributes. Useful for simple cases of <code>filter</code>.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Collection-instance-withPivot" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-instance-withPivot">withPivot</a></span><span class="parenthesis">(</span><span class="item-name">columns</span><span class="parenthesis">)</span></span><span class="type-signature"> &rarr;  <a href="#Collection">Collection</a></span>
          </span
          ><a href="docs/src_relation.js.html#line619" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">columns</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string[]</code
>
</span></code>
      

      <div class="description">
        <p>Names of columns to be included when retrieving pivot table rows.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  ><a href="#Collection">Collection</a></code
>




<span class="param-desc">
  <p>Self, this method is chainable.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>The <code>withPivot</code> method is used exclusively on <a href="#Model-instance-belongsToMany"><code>belongsToMany</code></a> relations, and allows for additional fields to be pulled
from the joining table.</p>
<pre class="prettyprint source"><code>var Tag = bookshelf.Model.extend({
  comments: function() {
    return this.belongsToMany(Comment).withPivot(['created_at', 'order']);
  }
});</code></pre>
    </div>
  
</div>

          
        </div>
    

    
        <h3
          id="Collection-subsection-lodash-methods"
          class="subsection-title"
        >Lodash Methods</h3>
        <ul class="lodash-methods">
          
              
<li id="Collection-instance-chain" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#chain">chain</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-countBy" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#countBy">countBy</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-difference" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#difference">difference</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-drop" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#drop">drop</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-each" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#each">each</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-every" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#every">every</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-filter" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#filter">filter</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-find" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#find">find</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-first" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#first">first</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-forEach" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#forEach">forEach</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-groupBy" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#groupBy">groupBy</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-head" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#head">head</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-includes" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#includes">includes</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-indexOf" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#indexOf">indexOf</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-initial" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#initial">initial</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-invokeMap" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#invokeMap">invokeMap</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-isEmpty" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#isEmpty">isEmpty</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-last" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#last">last</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-lastIndexOf" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#lastIndexOf">lastIndexOf</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-map" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#map">map</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-max" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#max">max</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-maxBy" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#maxBy">maxBy</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-min" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#min">min</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-minBy" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#minBy">minBy</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-reduce" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#reduce">reduce</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-reduceRight" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#reduceRight">reduceRight</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-reject" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#reject">reject</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-shuffle" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#shuffle">shuffle</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-size" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#size">size</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-some" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#some">some</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-sortBy" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#sortBy">sortBy</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-tail" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#tail">tail</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-take" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#take">take</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-toArray" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#toArray">toArray</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
              
<li id="Collection-instance-without" class="lodash-method">
  <span class="signature"><span class="parameters"><span class="name"><a href="http://lodash.com/docs/#without">without</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span></span>
</li>

          
        </ul>
    

    

    
        <h3
          id="Collection-subsection-events"
          class="subsection-title"
        >Events</h3>

        
            
<div class="method has-description">
    

        <h4 id="Collection-event-fetched" class="item-header">
          
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >collection</span
                >.</span><span class="event-on">on</span><span class="parenthesis">(</span><a href="#Collection-event-fetched">"fetched"</a><span class="comma">, </span> <span class="parenthesis">(</span><span class="item-name">collection</span><span class="comma">, </span><span class="item-name">response</span><span class="comma">, </span><span class="item-name">options</span><span class="parenthesis">)</span> <span class="fat-arrow">=&gt;</span>
          </span
          ><a href="docs/src_collection.js.html#line133" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">collection</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  ><a href="#Collection">Collection</a></code
>
</span></code>
      

      <div class="description">
        <p>The collection performing the <a href="#Collection-instance-fetch"><code>Collection#fetch</code></a>.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">response</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Knex query response.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">options</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >Object</code
>
</span></code>
      

      <div class="description">
        <p>Options object passed to <a href="#Collection-instance-fetch"><code>fetch</code></a>.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            


<code class="param-type"
  >Promise</code
>





        
  </div>

  
    <div class="item-description">
        <p>Fired after a <code>fetch</code> operation. A promise may be returned from the
event handler for async behaviour.</p>
    </div>
  
</div>

        
    
</article>


    




<header>
    
        <h2 id="section-Collection-static-EmptyError">
            <span class="ancestors"><a href="#Collection">Collection</a>.</span
        >EmptyError</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Collection-static-EmptyError-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Collection-static-EmptyError" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="member-of"
                ><span class="class-name"
                  >Collection</span
                >.</span><span class="parameters"><span class="name"><a href="#Collection-static-EmptyError">EmptyError</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_collection.js.html#line444" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Thrown when no records are found by <a href="#Collection-instance-fetch"><code>fetch</code></a>,
  <a href="#Model-instance-fetchAll"><code>Model#fetchAll</code></a>, or <a href="#Model-static-fetchAll"><code>Model.fetchAll</code></a> when called with
  the <code>{require: true}</code> option.</p>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    

    

    

    

    

    
</article>



</section>






</section>







<header>
    
        <h2 id="section-Events">Events</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        <h3
          id="Events-subsection-construction"
          class="subsection-title"
        >Construction</h3>
        
<div class="method has-description">
    

        <h4 id="Events" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
            <span class="new">new</span>
          
          <span class="parameters"><span class="name"><a href="#Events">Events</a></span><span class="parenthesis">(</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line12" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Base Event class inherited by <a href="#Model"><code>Model</code></a> and <a href="#Collection"><code>Collection</code></a>. It's not
meant to be used directly, and is only displayed here for completeness.</p>
    </div>
  
</div>

        

    
    </div>

    

    

     

    

    

    

    
        <h3
          id="Events-subsection-methods"
          class="subsection-title"
        >Methods</h3>
        <div class="methods">
          
              
<div class="method has-description">
    

        <h4 id="Events-instance-off" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >events</span
                >.</span><span class="parameters"><span class="name"><a href="#Events-instance-off">off</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line40" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event or space separated list of events to stop listening
  to.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Remove a previously-bound callback event listener from an object. If no
event name is specified, callbacks for all events will be removed.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Events-instance-on" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >events</span
                >.</span><span class="parameters"><span class="name"><a href="#Events-instance-on">on</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="comma">, </span><span class="item-name">callback</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line20" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event or space separated list of events to register a
  callback for.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">callback</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        <p>That callback to invoke whenever the event is fired.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Register an event listener. The callback will be invoked whenever the event
is fired. The event string may also be a space-delimited list of several
event names.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Events-instance-once" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >events</span
                >.</span><span class="parameters"><span class="name"><a href="#Events-instance-once">once</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="comma">, </span><span class="item-name">callback</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line104" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event or space separated list of events to register a
  callback for.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="item-name">callback</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >function</code
>
</span></code>
      

      <div class="description">
        <p>That callback to invoke only once when the event is fired.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Just like <a href="#Events-instance-on"><code>Events#on</code></a>, but causes the bound callback to fire only
once before being removed. Handy for saying &quot;the next time that X happens,
do this&quot;. When multiple events are passed in using the space separated
syntax, the event will fire once for every event you passed in, not once
for a combination of all events.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Events-instance-trigger" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >events</span
                >.</span><span class="parameters"><span class="name"><a href="#Events-instance-trigger">trigger</a></span><span class="parenthesis">(</span><span class="item-name">nameOrNames</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line59" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">nameOrNames</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The name of the event to trigger. Also accepts a space separated list of
  event names.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>Extra arguments to pass to the event listener callback function.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
  </div>

  
    <div class="item-description">
        <p>Trigger callbacks for the given event, or space-delimited list of events.
Subsequent arguments to <code>trigger</code> will be passed along to the event
callback.</p>
    </div>
  
</div>

          
              
<div class="method has-description">
    

        <h4 id="Events-instance-triggerThen" class="item-header">
          <span class="type-signature"></span>
          <span class="signature">
          
          <span class="member-of"
                ><span class="class-name"
                  >events</span
                >.</span><span class="parameters"><span class="name"><a href="#Events-instance-triggerThen">triggerThen</a></span><span class="parenthesis">(</span><span class="item-name">name</span><span class="comma">, </span><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span><span class="parenthesis">)</span></span><span class="type-signature"></span>
          </span
          ><a href="docs/src_base_events.js.html#line79" class="source-link">source</a></h4>

        
    

  <div class="attributes">

    

    

    

    

    
        <h5>Parameters</h5>
        

<ul class="params">
  
    <li>
      <code class="param"><span class="item-name">name</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >string</code
>
</span></code>
      

      <div class="description">
        <p>The event name, or a whitespace-separated list of event names, to be
  triggered.</p>
        
      </div>

    </li>
  
    <li>
      <code class="param"><span class="optional-bracket">[</span><span class="variable-ellipsis">&hellip;</span><span class="item-name">args</span><span class="optional-bracket">]</span></code>

      
          <code class="param-type"><span class="param-type"
            ><code class="param-type"
  >mixed</code
>
</span></code>
      

      <div class="description">
        <p>Arguments to be passed to any registered event handlers.</p>
        
      </div>

    </li>
  
</ul>

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    

    

    

    

    
    <h5>Returns</h5>
    
            




<span class="param-desc">
  <p>Promise&lt;mixed[]&gt;
  A promise resolving the the resolved return values of any triggered handlers.</p>
</span>


        
  </div>

  
    <div class="item-description">
        <p>A promise version of <a href="#Events-instance-trigger"><code>Events#trigger</code></a>, returning a promise which
resolves with all return values from triggered event handlers. If any of the
event handlers throw an <code>Error</code> or return a rejected promise, the promise
will be rejected. Used internally on the <code>"creating"</code>,
<code>"updating"</code>, <code>"saving"</code>, and <code>&quot;destroying&quot;</code> events, and can be helpful when needing async
event handlers (for validations, etc).</p>
    </div>
  
</div>

          
        </div>
    

    

    

    
</article>



</section>






    






    <section id="changelog" class="changelog">
        

<article class="tutorial">
  <h2 id=""></h2>
  <h2>Change Log</h2><p><strong>0.13.3</strong> <small><em>Mar 26, 2018</em></small> - <a href="https://github.com/bookshelf/bookshelf/compare/0.13.2...0.13.3">Diff</a></p>
<h4>Potentially breaking changes</h4><ul>
<li>Saving a model that hasn't changed will not update its <code>updated_at</code> attribute. This was included in a patch release because the chances of any applications depending on this behavior are very small: <a href="https://github.com/bookshelf/bookshelf/pull/1798">#1798</a></li>
</ul>
<h4>Bug fixes</h4><ul>
<li>Clean up automatic timestamps feature: <a href="https://github.com/bookshelf/bookshelf/pull/1798">#1798</a></li>
</ul>
<h4>Documentation</h4><ul>
<li>Expand documentation of the automatic timestamps feature: <a href="https://github.com/bookshelf/bookshelf/pull/1798">#1798</a></li>
</ul>
<p><strong>0.13.2</strong> <small><em>Mar 23, 2018</em></small> - <a href="https://github.com/bookshelf/bookshelf/compare/0.13.0...0.13.2">Diff</a></p>
<h4>Bug fixes</h4><ul>
<li>Fix timestamps set with Invalid Date in some cases: <a href="https://github.com/bookshelf/bookshelf/pull/1796">#1796</a></li>
</ul>
<h4>Documentation</h4><ul>
<li>Fix incorrect data types and undocumented Model#defaults property: <a href="https://github.com/bookshelf/bookshelf/pull/1797">#1797</a></li>
</ul>
<p><strong>0.13.0</strong> <small><em>Mar 18, 2018</em></small> - <a href="https://github.com/bookshelf/bookshelf/compare/0.12.1...0.13.0">Diff</a></p>
<h4>Breaking changes</h4><ul>
<li>Make <code>require: true</code> the default when deleting models: <a href="https://github.com/bookshelf/bookshelf/pull/1779">#1779</a></li>
<li>Remove the second argument to the model's destroyed event handler: <a href="https://github.com/bookshelf/bookshelf/pull/1777">#1777</a></li>
<li>Events are now triggered sequentially even when the handlers execute asynchronous code: <a href="https://github.com/bookshelf/bookshelf/pull/1768">#1768</a></li>
<li>Drop support for Node versions older than 4: <a href="https://github.com/bookshelf/bookshelf/pull/1696">#1696</a></li>
<li>Reorder <code>saving</code> and <code>creating</code> events to reflect the documentation: <a href="https://github.com/bookshelf/bookshelf/pull/1142">#1142</a></li>
</ul>
<h4>Enhancements</h4><ul>
<li>Only request <code>returning</code> attribute if client supports <code>returning</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1770">#1770</a></li>
<li>Throw error if user doesn't pass a valid Knex instance on initialize: <a href="https://github.com/bookshelf/bookshelf/pull/1756">#1756</a></li>
<li>Add parameterized virtual properties to virtuals plugin: <a href="https://github.com/bookshelf/bookshelf/pull/1755">#1755</a></li>
<li>Add individual attribute processor plugin to core: <a href="https://github.com/bookshelf/bookshelf/pull/1741">#1741</a></li>
<li>Format <code>idAttribute</code> on save and delete: <a href="https://github.com/bookshelf/bookshelf/pull/1680">#1680</a></li>
<li>Add <code>withSchema</code> option to all database operations: <a href="https://github.com/bookshelf/bookshelf/pull/1638">#1638</a></li>
<li>Add a case converter plugin to core: <a href="https://github.com/bookshelf/bookshelf/pull/1093">#1093</a></li>
</ul>
<h4>Bug fixes</h4><ul>
<li>Fix inconsistent timestamp values between save and fetch: <a href="https://github.com/bookshelf/bookshelf/pull/1784">#1784</a></li>
<li>Set <code>model.id</code> if attributes being <code>.set()</code> contain a parsed version of <code>idAttribute</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1760">#1760</a></li>
<li>Fix pagination plugin's <code>fetchPage()</code> ignoring or hanging with transactions: <a href="https://github.com/bookshelf/bookshelf/pull/1625">#1625</a></li>
<li>Fix <code>fetchPage()</code> from pagination plugin not working for relation collections: <a href="https://github.com/bookshelf/bookshelf/pull/1561">#1561</a></li>
<li>Don't try to update <code>idAttribute</code> if it hasn't changed: <a href="https://github.com/bookshelf/bookshelf/pull/1260">#1260</a></li>
</ul>
<h4>Test suite</h4><ul>
<li>Increase timeout of the large arrays test: <a href="https://github.com/bookshelf/bookshelf/pull/1778">#1778</a></li>
<li>Add test to verify that <code>parentId</code> is not undefined when using <code>fetchAll</code> with relations: <a href="https://github.com/bookshelf/bookshelf/pull/1769">#1769</a></li>
<li>Fixes and general improvements to the test suite: <a href="https://github.com/bookshelf/bookshelf/pull/1753">#1753</a></li>
<li>Remove OracleDB tests: <a href="https://github.com/bookshelf/bookshelf/pull/1744">#1744</a></li>
<li>Fix invalid test related to dirty attributes: <a href="https://github.com/bookshelf/bookshelf/pull/1312">#1312</a></li>
</ul>
<h4>Documentation</h4><ul>
<li>Improve docs about running tests: <a href="https://github.com/bookshelf/bookshelf/pull/1761">#1761</a></li>
<li>Fix typo on parse-and-format tutorial: <a href="https://github.com/bookshelf/bookshelf/pull/1748">#1748</a></li>
<li>Add Bookshelf Manager to list of community plugins: <a href="https://github.com/bookshelf/bookshelf/pull/1747">#1747</a></li>
</ul>
<h4>Dependencies</h4><ul>
<li>Update some dependencies: <a href="https://github.com/bookshelf/bookshelf/pull/1787">#1787</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1782">#1782</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1780">#1780</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1767">#1767</a> <a href="https://github.com/bookshelf/bookshelf/pull/1746">#1746</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1730">#1730</a></li>
</ul>
<p><strong>0.12.1</strong> <small><em>Jan 8, 2018</em></small> - <a href="https://github.com/bookshelf/bookshelf/compare/0.12.0...0.12.1">Diff</a></p>
<ul>
<li>Lots of documentation fixes and updates:<ul>
<li>Fix incorrect value of second argument to model event handlers: <a href="https://github.com/bookshelf/bookshelf/pull/1723">#1723</a></li>
<li>Fix incorrect return value from <code>.detach()</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1720">#1720</a></li>
<li>Fix incorrect return value from <code>model.has()</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1712">#1712</a></li>
<li>Fix <code>fetching:collection</code> and <code>fetched:collection</code> not being generated or visible on the navigation bar: <a href="https://github.com/bookshelf/bookshelf/pull/1114">#1114</a></li>
<li>Update contributing document and issue templates: <a href="https://github.com/bookshelf/bookshelf/pull/1736">#1736</a></li>
<li>Add more information and links to Parse and Format docs: <a href="https://github.com/bookshelf/bookshelf/pull/1727">#1727</a></li>
<li>Add bookshelf-ez-fetch to Community Plugins: <a href="https://github.com/bookshelf/bookshelf/pull/1708">#1708</a></li>
<li>Add bookshelf-default-select to Community Plugins: <a href="https://github.com/bookshelf/bookshelf/pull/1706">#1706</a></li>
<li>Add information and examples about calling <code>super()</code> on model's <code>initialize()</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1529">#1529</a></li>
<li>Add npm version badge to readme: <a href="https://github.com/bookshelf/bookshelf/commit/f4dd79267ad8267a7073dd5c9f0661f6591ae96f">f4dd792</a></li>
</ul>
</li>
<li>Fix inability to attach belongsToMany relation to models fetched with <code>fetchAll()</code>: <a href="https://github.com/bookshelf/bookshelf/pull/1716">#1716</a></li>
<li>Fix foreign key = 0 not fetching related object: <a href="https://github.com/bookshelf/bookshelf/pull/1639">#1639</a></li>
<li>Fix unparsed <code>previousAttributes</code> for related models: <a href="https://github.com/bookshelf/bookshelf/pull/1457">#1457</a></li>
<li>Update some dependencies: <a href="https://github.com/bookshelf/bookshelf/pull/1734">#1734</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1733">#1733</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1732">#1732</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1728">#1728</a>, <a href="https://github.com/bookshelf/bookshelf/pull/1726">#1726</a></li>
</ul>
<p><strong>0.12.0</strong> <small><em>Nov 27, 2017</em></small> - <a href="https://github.com/bookshelf/bookshelf/compare/0.11.1...0.12.0">Diff</a></p>
<ul>
<li>Skip visibility-plugin <code>hidden</code> and <code>visible</code> attributes <a href="https://github.com/bookshelf/bookshelf/pull/1699">#1699</a>.<ul>
<li>Used w/ <code>&lt;model&gt;.toJSON({ visibility: false })</code></li>
</ul>
</li>
<li>Updated knex peer dependency version to 0.14.x <a href="https://github.com/bookshelf/bookshelf/pull/1694">#1694</a>.</li>
<li>Documentation typo fixes <a href="https://github.com/bookshelf/bookshelf/pull/1693">#1693</a>.</li>
<li>Now caching <code>node_modules</code> to speed up travis-ci builds <a href="https://github.com/bookshelf/bookshelf/pull/1695">#1695</a>.</li>
<li>Use Docker containers for test runs <a href="https://github.com/bookshelf/bookshelf/pull/1674">#1674</a>.</li>
<li>Make <code>postpublish</code> work regardless of git remote config <a href="https://github.com/bookshelf/bookshelf/pull/1697">#1697</a>.</li>
</ul>
<p><strong>0.11.1</strong> <small><em>Nov 15, 2017</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.11.0...0.11.1">Diff</a></p>
<ul>
<li>Fixed regression #1691: File missing on <code>postinstall</code><ul>
<li>npm <code>postinstall</code> script can be run as a part of npm <code>prepublish</code> script.</li>
</ul>
</li>
</ul>
<p><strong>0.11.0</strong> <small><em>Nov 15, 2017</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.10.4...0.11.0">Diff</a></p>
<ul>
<li>Moved <code>.babelrc</code> -&gt; <code>src/.babelrc</code> <a href="https://github.com/bookshelf/bookshelf/pull/1470">#1470</a></li>
<li>Timestamp on save now utilizes a date option for timestamp updates on insert and update. <a href="https://github.com/bookshelf/bookshelf/pull/1592">#1592</a><ul>
<li>Used in options on save like so: <code>m.save({item: 'test'}, { date: dateInThePast })</code></li>
</ul>
</li>
<li>Added <code>morphValues</code> for <code>morphTo</code> relation. <a href="https://github.com/bookshelf/bookshelf/pull/1326">#1326</a></li>
<li>Added ability to also set timestamps as model attributes in save. #</li>
<li>Removed non-production files from packaging / added them to .npmignore <a href="https://github.com/bookshelf/bookshelf/pull/1679">#1679</a></li>
<li>Development Facing<ul>
<li>Oracle tests only run when oracle is installed.</li>
<li>Refactoring on the registry plugin</li>
<li>Updated a lot of documents related to repo organization.</li>
</ul>
</li>
</ul>
<p><strong>0.10.4</strong> - <small><em>Jul 17, 2017</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.10.3...0.10.4">Diff</a></p>
<ul>
<li>Allow knex 0.13.x</li>
<li>Use uuid instead of node-uuid</li>
<li>Test Bookshelf with Node v7</li>
<li>Updated Author info in package.json</li>
<li>Remove lodash from build script</li>
<li>Add OracleDB integration tests</li>
<li>Add opportunity to override <code>visible</code> and <code>hidden</code> behaviour for toJSON function</li>
<li>Do not load belongsTo if foreignKey is null</li>
<li>Optimise <code>timestamp</code> function: respect updated_at/created_at being part of the query</li>
<li>Fix <code>fetchPage</code> on Collection (pagination plugin)</li>
<li>Fixing virtuals when <code>omitNew=true</code></li>
<li>Lot's of typo fixes and documentation updates</li>
</ul>
<p><strong>0.10.3</strong> - <small><em>Jan 21, 2017</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.10.2...0.10.3">Diff</a></p>
<ul>
<li>Drop Node support for 0.10 and 0.12</li>
<li>Trigger creating event for attached models</li>
<li>Add support for uninstantiated models relations</li>
<li>Add foreignKeyTarget to relation methods</li>
</ul>
<p><strong>0.10.2</strong> - <small><em>Sept 22, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.10.1...0.10.2">Diff</a></p>
<ul>
<li>Fixes memory leak introduced in 0.10.0 caused by binding <code>this.listeners</code> in <code>triggerThen</code></li>
<li>Fixes Bluebird warning when a Promise was internally rejected with a non-error</li>
</ul>
<p><strong>0.10.1</strong> - <small><em>Sept 14, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.10.0...0.10.1">Diff</a></p>
<ul>
<li>Allows using knex 0.12 as a peerDependency</li>
<li>knex instance used by bookshelf may be swapped out</li>
</ul>
<p><strong>0.10.0</strong> — <small><em>Jun 29, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.5...0.10.0">Diff</a></p>
<p><strong>Breaking Changes:</strong></p>
<ul>
<li>Removal/renaming of certain lodash functions from Model and Collection that were removed in lodash 4.<ul>
<li>Collection Methods<ul>
<li>removed <code>CollectionBase#collect</code> =&gt; use <code>CollectionBase#map</code> instead</li>
<li>removed <code>CollectionBase#foldl</code> =&gt; use <code>CollectionBase#reduce</code> instead</li>
<li>removed <code>CollectionBase#inject</code> =&gt; use <code>CollectionBase#reduce</code> instead</li>
<li>removed <code>CollectionBase#foldr</code> =&gt; use <code>CollectionBase#reduceRight</code> instead</li>
<li>removed <code>CollectionBase#detect</code> =&gt; use <code>CollectionBase#find</code> instead</li>
<li>removed <code>CollectionBase#select</code> =&gt; use <code>CollectionBase#filter</code> instead</li>
<li>removed <code>CollectionBase#all</code> =&gt; use <code>CollectionBase#every</code> instead</li>
<li>removed <code>CollectionBase#any</code> =&gt; use <code>CollectionBase#some</code> instead</li>
<li>removed <code>CollectionBase#include</code> =&gt; use <code>CollectionBase#includes</code> instead</li>
<li>removed <code>CollectionBase#contains</code> =&gt; use <code>CollectionBase#includes</code> instead</li>
<li>removed <code>CollectionBase#rest</code> =&gt; use <code>CollectionBase#tail instead</code></li>
<li>renamed <code>CollectionBase#invoke</code> =&gt; <code>CollectionBase#invokeMap</code></li>
<li>split <code>CollectionBase#max</code> into <code>CollectionBase#maxBy</code> - see the <a href="https://lodash.com/docs/#max">lodash docs</a> for more explanation</li>
<li>split <code>CollectionBase#min</code> into <code>CollectionBase#minBy</code> - see the <a href="https://lodash.com/docs/#min">lodash docs</a> for more explanation</li>
</ul>
</li>
<li>Model Methods<ul>
<li>renamed <code>ModelBase#pairs</code> =&gt; <code>ModelBase#toPairs</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Other Changes:</strong></p>
<ul>
<li>Update to Lodash 4. #1287</li>
<li>Registry plugin: Better support for custom relations. #1294</li>
</ul>
<p><strong>0.9.5</strong> — <small><em>May 15, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.4...0.9.5">Diff</a></p>
<ul>
<li>Add pagination plugin. #1183</li>
<li>Fire <a href="#Model-event-fetched"><code>Model#event:fetched</code></a> on eagerly loaded relations. #1206</li>
<li>Correct cloning of <a href="#Model-instance-belongsToMany"><code>Model#belongsToMany</code></a> decorated relations. #1222</li>
<li>Update Knex to 0.11.x. #1227</li>
<li>Update minimum lodash version. #1230</li>
</ul>
<p><strong>0.9.4</strong> — <small><em>April 3, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.3...0.9.4">Diff</a></p>
<ul>
<li>Include <code>babel-runtime</code> as a dependency. #1188</li>
</ul>
<p><strong>0.9.3</strong> — <small><em>April 3, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.2...0.9.3">Diff</a></p>
<ul>
<li>Bugfix: Restore support for <code>camelCase</code> and <code>color:separated</code> event names. #1184</li>
</ul>
<p><strong>0.9.2</strong> — <small><em>February 17, 2016</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.1...0.9.2">Diff</a></p>
<ul>
<li>Permit up to Knex 0.11.0 via <code>peerDependencies</code>.</li>
<li><code>Model.forge</code> works for ES6 classes. #924</li>
<li>Fix <code>Collection#count</code> for <code>hasMany</code> relations. #1115</li>
</ul>
<p><strong>0.9.1</strong> — <small><em>November 4, 2015</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.9.0...0.9.1">Diff</a></p>
<ul>
<li><a href="#Events-instance-off"><code>Events#off</code></a> can now deregister multiple methods at once. #983</li>
<li>Permit Knex 0.10.0 via <code>peerDependencies</code>. #998</li>
</ul>
<p><strong>0.9.0</strong> — <small><em>November 1, 2015</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.8.2...0.9.0">Diff</a></p>
<ul>
<li>Repo no longer includes built source or generated documentation. Release script updated to include these only in the tagged release commit. #950.</li>
<li><a href="#Model-instance-previous"><code>Model#previous</code></a> returned <code>undefined</code> instead of <code>null</code> for non-existant attributes.</li>
<li>Update tests and documentation to confirm that <code>null</code> (rather than <code>undefined</code>) is returned from <a href="#Model-instance-fetch"><code>Model#fetch</code></a> and <a href="#Collection-instance-fetchOne"><code>Collection#fetchOne</code></a>.</li>
<li>Fix error in virtual plugin - #936</li>
<li>Correct error updating parsed/formatted <a href="#Model-instance-idAttribute"><code>Model#idAttribute</code></a> after successful <code>insert</code> operation. #955</li>
<li>Many documentation fixes.</li>
</ul>
<p><strong>0.8.2</strong> — <small><em>August 20, 2015</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.8.1...0.8.2">Diff</a></p>
<ul>
<li>ES6/7: Move code base to <code>/src</code> — code is now compiled into <code>/lib</code> via <a href="https://babeljs.io/">Babel</a>.</li>
<li>Add <code>collection.count</code>, <code>model.count</code> and <code>Model.count</code>.</li>
<li>Add <code>model.refresh</code>. #796</li>
<li>Prevent <code>fetch</code> and <code>refresh</code> from trying to add JSON attributes to a <code>where</code> clause. #550 #778</li>
<li>Virtuals plugin now supports <code>{patch: true}</code> argument to <code>model.save</code>. #542</li>
<li>Restored <code>model.clone</code> and <code>collection.clone</code>, which were not previously working. #744</li>
<li>Allow <code>bookshelf.Collection</code> to be modified and extended by plugins (so that relations and <code>fetchAll</code> operations will return the extended instance). #681 #688</li>
<li>Fix <code>model.timestamps</code> behaviour which deviated from documentation. Also ensure that <code>createdAt</code> is set when <code>{method: &quot;insert&quot;}</code> is passed explicitly. #787</li>
<li>Calling <code>create</code> on a <code>through</code> relationship no longer tries to make a pivot object. Previously this would attempt to create an object with invalid foreign keys. #768</li>
<li>Parse foreign keys set during <code>create</code> in a relation. #770</li>
</ul>
<p><strong>0.8.1</strong> — <small><em>May 12, 2015</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.8.0...0.8.1">Diff</a></p>
<ul>
<li>Fix for regression in <code>initialize</code> not being called in Collection constructor, #737.</li>
<li>Fix for regression, removing <code>omitPivot</code> in 0.8 #721</li>
<li>Added <code>serialize</code>, a method which contains toJSON logic for easier customization.</li>
</ul>
<p><strong>0.8.0</strong> — <small><em>May 1, 2015</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.9...0.8.0">Diff</a></p>
<ul>
<li>Dropped Backbone dependency</li>
<li>More specific errors throughout, #522</li>
<li>Support {require: true} for model.destroy #617</li>
<li>Add lifecycle events on pivot models for belongsToMany, .through #578</li>
<li>Allows for select/column calls in the query builder closure, #633.</li>
<li>Added per-constructor error classes #694 (note: this will not work in CoffeeScript).</li>
</ul>
<p><strong>Breaking Changes:</strong></p>
<ul>
<li>Removed the <code>__super__</code> internal property on the constructor, this shouldn't have been something you were relying on anyway.</li>
</ul>
<p><strong>0.7.9</strong> — <small><em>Oct 28, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.8...0.7.9">Diff</a></p>
<ul>
<li>Fix for regression in columns / eager fetch query constraints, (#510).</li>
</ul>
<p><strong>0.7.8</strong> — <small><em>Oct 28, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.7...0.7.8">Diff</a></p>
<ul>
<li>Timestamp <code>created_at</code> is now saved with any insert.</li>
<li>Fix for regression created by #429.</li>
<li>New events, <code>attaching</code>, <code>attached</code>, <code>detaching</code>, <code>detached</code> #452.</li>
<li>Ability to specify custom column names in morphTo, #454</li>
<li>Fix for stack overflow with model list as arguments, #482</li>
<li>Modified location of eager fetch query constraints internally.</li>
</ul>
<p><strong>0.7.7</strong> — <small><em>July 23, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.6...0.7.7">Diff</a></p>
<ul>
<li>Fix for formatting on polymorphic keys, (#429).</li>
<li>Added a resolve method for specifying a custom resolver function for the registry plugin.</li>
</ul>
<p><strong>0.7.6</strong> — <small><em>June 29, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.5...0.7.6">Diff</a>
 Add <code>omitPivot</code> flag on toJSON options for omitting the <code>_pivot_</code> keys in <code>through</code> and <code>belongsToMany</code> relations (#404).</p>
<p><strong>0.7.5</strong> — <small><em>June 23, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.4...0.7.5">Diff</a>
 Fix missing NotFoundError &amp; EmptyError on Model &amp; Collection, respectively (#389, 399).</p>
<p><strong>0.7.4</strong> — <small><em>June 18, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.3...0.7.4">Diff</a>
 Added <code>bookshelf.model(name, protoProps, [staticProps])</code> syntax for registry plugin.</p>
<p><strong>0.7.3</strong> — <small><em>June 17, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.2...0.7.3">Diff</a>
 Fix for collection dropping models early in set, #376.</p>
<p><strong>0.7.2</strong> — <small><em>June 12, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.1...0.7.2">Diff</a>
 Pass a cloned copy of the model's attributes to <code>format</code> rather than the original, related to #315.</p>
<p><strong>0.7.1</strong> — <small><em>June 10, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.7.0...0.7.1">Diff</a>
 Ensure the knex version &gt;= 0.6.10, where a major regression affecting column names was fixed.</p>
<p><strong>0.7.0</strong> — <small><em>June 9, 2014</em></small></p>
<ul>
<li>Added <a href="#Model-instance-fetchAll"><code>Model#fetchAll</code></a>, for fetching a collection of models from a model.</li>
<li>Added <a href="#Model-instance-where"><code>Model#where</code></a>, as a shortcut for the most commonly used <a href="#Model-instance-query">query method</a>.</li>
<li>Initializing via a plain options object is deprecated, you must now pass in an initialized knex instance.</li>
<li>Adding typed errors (#221).</li>
<li>Upgrade to support knex 0.6.x</li>
</ul>
<p><strong>0.6.12</strong> — <small><em>June 5, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.11...0.6.12">Diff</a>
 Fix for eager loaded belongsTo relation bug with custom parse/format (#377).</p>
<p><strong>0.6.11</strong> — <small><em>June 4, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.10...0.6.11">Diff</a>
 Temporarily add knex to <code>peerDependencies</code> until 0.7 is released to support knex 0.6 and there exists a better internal method of doing a semver check. Fix for belongsTo relation bug (#353).</p>
<p><strong>0.6.10</strong> — <small><em>April 3, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.9...0.6.10">Diff</a></p>
<ul>
<li>Bumping dependencies, including upgrading to Bluebird 1.2, trigger-then 0.3, fixing an erroneous &quot;unhandledRejection&quot; (#310).</li>
<li><code>fetchOne</code> properly resets the query on the collection, (#300).</li>
</ul>
<p><strong>0.6.9</strong> — <small><em>April 3, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.8...0.6.9">Diff</a>
 Only prefix model fields with the &quot;tableName&quot; after format has been called, (#308).</p>
<p><strong>0.6.8</strong> — <small><em>March 6, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.7...0.6.8">Diff</a></p>
<ul>
<li>Virtuals plugin may now accept a hash of attributes to set.</li>
<li>Properly fix issue addressed in 0.6.7.</li>
</ul>
<p><strong>0.6.7</strong> — <small><em>March 2, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.6...0.6.7">Diff</a>
 Bugfix for edge case for eager loaded relations and <code>relatedData</code> settings.</p>
<p><strong>0.6.6</strong> — <small><em>March 1, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.5...0.6.6">Diff</a>
 Bugfix for registry plugin, resolving correct models for &quot;through&quot; relations. (#260)</p>
<p><strong>0.6.5</strong> — <small><em>February 28, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.4...0.6.5">Diff</a></p>
<ul>
<li>Added <a href="#Collection-instance-reduceThen"><code>Collection#reduceThen</code></a> as a passthrough to Bluebird's &quot;reduce&quot; method with models.</li>
<li>Options are now passed to &quot;plugin&quot; method. (#254)</li>
<li>Bugfix for registry plugin. (#259)</li>
</ul>
<p><strong>0.6.4</strong> — <small><em>February 11, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.3...0.6.4">Diff</a>
 Adds static method <a href="#Model-static-collection"><code>Model.collection()</code></a> as a shortcut for creating a collection with the current model.</p>
<p><strong>0.6.3</strong> — <small><em>February 9, 2014</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.2...0.6.3">Diff</a></p>
<ul>
<li>Added an<code>Relation#updatePivot</code> method for updating tables on a &quot;belongsToMany&quot; relation. (#134, #230)</li>
<li>Allow mutating the options for passing constraints to eager loaded relations. (#151)</li>
<li>All keys of an object passed into sync are properly prefixed before sync. (#177)</li>
<li>Clearer error messages for debugging. (#204, #197)</li>
<li>Fixed error message for updates that don't affect rows. (#228)</li>
<li>Group by the correct key on &quot;belongsTo.through&quot; relations. (#214)</li>
<li>Ability to only use <code>created_at</code> or <code>updated_at</code> as timestamp properties. (#158)</li>
<li>Numerous documentation corrections, clarifications, enhancements.</li>
<li>Bumped Bluebird dependency to ~1.0.0.</li>
</ul>
<p><strong>Plugins:</strong></p>
<ul>
<li>Added the <code>registry</code> plugin for registering models as strings, helping with the circular dependency problem</li>
<li>Added the <code>virtuals</code> plugin for getting/setting virtual (computed) properties on the model.</li>
<li>Added the <code>visibility</code> plugin for specifying a whitelist/blacklist of keys when a model is serialized with toJSON.</li>
</ul>
<p><strong>0.6.2</strong> — <small><em>December 18, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.1...0.6.2">Diff</a></p>
<ul>
<li>Debug may now be passed as an option in any sync method, to log queries, including relations.</li>
<li>Save now triggers an error in updates with no affected rows. (#119)</li>
<li>The <code>model.id</code> attribute is only set on insert if it's empty. (#130)</li>
<li>Ensure eager loaded relations can use attach/detach. (#120)</li>
</ul>
<p><strong>0.6.1</strong> — <small><em>November 26, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.6.0...0.6.1">Diff</a>
 Fixes bug with promise code and saving event firing, where promises are not properly resolved with &quot;.all&quot; during saving events.</p>
<p><strong>0.6.0</strong> — <small><em>November 25, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.8...0.6.0">Diff</a></p>
<ul>
<li>Updating dependency to knex.js 0.5.x</li>
<li>Switched from when.js to <a href="https://github.com/petkaantonov/bluebird">bluebird</a> for promise implementation, with shim for backward compatibility.</li>
<li>Switched from underscore to lodash, for semver reliability.</li>
</ul>
<p><strong>0.5.8</strong> — <small><em>November 24, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.7...0.5.8">Diff</a></p>
<ul>
<li>Parse models after all relations have been eager loaded, for appropriate column name matching (thanks <a href="https://github.com/benesch">@benesch</a>) (#97)</li>
<li>Specify table for <code>withRelated</code> fetches to prevent column naming conflicts (#96).</li>
<li>Fix for polymorphic relation loading (#95).</li>
<li>Other documentation tweaks and other internal code cleanup.</li>
</ul>
<p><strong>0.5.7</strong> — <small><em>October 11, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.6...0.5.7">Diff</a>
 The &quot;fetching&quot; event is now fired on eager loaded relation fetches.</p>
<p><strong>0.5.6</strong> — <small><em>October 10, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.5...0.5.6">Diff</a>
 The <code>options.query</code> now contains the appropriate <code>knex</code> instance during the &quot;fetching&quot; event handler.</p>
<p><strong>0.5.5</strong> — <small><em>October 1, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.4...0.5.5">Diff</a>
 An eager loaded <a href="#Model-morphTo">morphTo</a> relation may now have child relations nested beneath it that are properly eager loaded, depending on the parent.</p>
<p><strong>0.5.4</strong> — <small><em>October 1, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.3...0.5.4">Diff</a></p>
<ul>
<li>Fix issue where the <code>relatedData</code> context was not appropriately maintained for subsequent <a href="#Collection-instance-create"><code>Collection#create</code></a> calls after an eager load (#77).</li>
<li>Documentation improvements, encouraging the use of <a href="#Model-instance-related"><code>Model#related</code></a> rather than calling a relation method directly, to keep association with the parent model's <code>relations</code> hash.</li>
</ul>
<p><strong>0.5.3</strong> — <small><em>September 26, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.2...0.5.3">Diff</a>
 The <code>columns</code> explicitly specified in a fetch are no-longer passed along when eager loading relations, fixes (#70).</p>
<p><strong>0.5.2</strong> — <small><em>September 22, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.1...0.5.2">Diff</a>
 Fixed incorrect eager loading in <code>belongsTo</code> relations (#65).</p>
<p><strong>0.5.1</strong> — <small><em>September 21, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.5.0...0.5.1">Diff</a>
 Fixed incorrect eager loading in <code>hasOne</code> relations (#63).</p>
<p><strong>0.5.0</strong> — <small><em>September 20, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.3.1...0.5.0">Diff</a>
 <strong>Major Breaking Changes:</strong></p>
<ul>
<li>Global state is no longer stored in the library, an instance is returned from <code>Bookshelf.initialize</code>, so you will need to call this once and then reference this <code>Bookshelf</code> client elsewhere in your application.</li>
<li>Lowercasing of <code>bookshelf.initialize</code>, <code>bookshelf.knex</code>, <code>bookshelf.transaction</code>.</li>
<li>During the lifecycle events, such as &quot;fetching&quot;, &quot;saving&quot;, or &quot;destroying&quot;, the model no-longer contains the active query builder instance at the time it is saved. If you need to modify the query builder chain inside of an event handler, you may now use <code>options.query</code> inside the event handlers.</li>
</ul>
<p><strong>Other Changes:</strong></p>
<ul>
<li>Added <code>tableName</code> for all queries, so joins use the correct id (#61).</li>
<li>The <code>attach</code> &amp; <code>detach</code> now remove models from the associated collection, as appropriate (#59).</li>
<li>A <code>withPivot</code> no longer accepts an object to specify the keys for the returned pivot items, if you wish to specify how these pivot objects are defined on the object, a custom <a href="#Model-toJSON">toJSON</a> is your best bet.</li>
<li>Added <a href="#Collection-instance-invokeThen"><code>Collection#invokeThen</code></a> and <code>Collection#mapThen</code> as convenience helpers for <code>Promise.all(collection.invoke(method, args*))</code> and <code>Promise.all(collection.map(method, iterator, [context]))</code>, respectively.</li>
<li>Added a <code>Bookshelf.plugin</code> method, for a standard way to extend Bookshelf instances.</li>
<li>A re-written modular architecture, to move the library toward becoming a database agnostic &quot;data mapper&quot; foundation, with the ablitiy to form relations between different data stores and types, not just SQL (although SQL is the primary focus for now). Also, support for AMD, for eventual use outside of Node.js runtime (with webSQL and likewise).</li>
</ul>
<p><strong>0.3.1</strong> — <small><em>August 29, 2013</em></small> — <a href="https://github.com/bookshelf/bookshelf/compare/0.3.0...0.3.1">Diff</a> — <a href="http://htmlpreview.github.com/?https://raw.github.com/bookshelf/bookshelf/0.3.0/index.html">Docs</a>
 Fixed regression in <code>belongsToMany</code> custom column name order.</p>
<p><strong>0.3.0</strong> — <small><em>August 28, 2013</em></small>
 Support for a <a href="#Model-instance-through"><code>Model#through</code></a> clause on various model relations. Creating a model from a related collection maintains the appropriate relation data (#35). Support for a <code>{patch: true}</code> flag on save, to only update specific saved attributes. Added a <code>fetchOne</code> method, for pulling out a single model from a collection, mostly useful for related collection instances. Updated to Knex &quot;0.2.x&quot; syntax for insert / returning, Ability to specify a <code>morphValue</code> on <a href="#Model-instance-morphOne"><code>Model#morphOne</code></a> or <a href="#Model-instance-morphMany"><code>Model#morphMany</code></a> relations. Internal refactor of relations for more consistent behavior.</p>
<p><strong>0.2.8</strong> — <small><em>August 26, 2013</em></small>
 Some minor fixes to make the <code>Sync</code> methods more consistent in their behavior when called directly, (#53).</p>
<p><strong>0.2.7</strong> — <small><em>August 21, 2013</em></small>
 Timestamp for <code>created_at</code> is not set during an &quot;update&quot; query, and the update where clause does not include the <code>idAttribute</code> if it isn't present (#51).</p>
<p><strong>0.2.6</strong> — <small><em>August 21, 2013</em></small>
 Fixes bug with query function feature added in <code>0.2.5</code>, mentioned in (#51).</p>
<p><strong>0.2.5</strong> — <small><em>August 19, 2013</em></small>
 The <a href="#Model-instance-query"><code>Model#query</code></a> method may now accept a function, for even more dynamic query building (#45). Fix for relations not allowing &quot;0&quot; as a valid foreign key value (#49).</p>
<p><strong>0.2.4</strong> — <small><em>July 30, 2013</em></small>
 More consistent query resetting, fixing query issues on post-query event handlers. The <code>toJSON</code> is only called on a related model if the method exists, allowing for objects or arrays to be manually specified on the <code>relations</code> hash and serialized properly on the parent's <code>toJSON</code>.</p>
<p><strong>0.2.3</strong> — <small><em>July 7, 2013</em></small>
 Fixing bug where <code>triggerThen</code> wasn't actually being used for several of the events as noted in 0.2.1 release.</p>
<p><strong>0.2.2</strong> — <small><em>July 2, 2013</em></small>
 The Model's <code>related</code> method is now a no-op if the model doesn't have the related method. Any <code>withPivot</code> columns on many-to-many relations are now prefixed with <code>_pivot</code> rather than <code>pivot</code> unless named otherwise, for consistency. The <code>_reset</code> is not called until after all triggered events so that <code>hasChanged</code> can be used on the current model state in the &quot;created&quot;, &quot;updated&quot;, &quot;saved&quot;, and &quot;destroyed&quot; events. Eager queries may be specified as an object with a function, to constrain the eager queries:</p>
<pre class="prettyprint source"><code>user.fetch({withRelated: ['accounts', {
'accounts.settings': function(qb) { qb.where('status', 'enabled'); }
}, 'other_data']}).then(...</code></pre><p><strong>0.2.1</strong> — <small><em>June 26, 2013</em></small>
 Using <code>triggerThen</code> instead of <code>trigger</code> for &quot;created&quot;, &quot;updated&quot;, &quot;saved&quot;, &quot;destroyed&quot;, and &quot;fetched&quot; events - if any async operations are needed <em>after</em> the model is created but before resolving the original promise.</p>
<p><strong>0.2.0</strong> — <small><em>June 24, 2013</em></small>
 Resolve Model's <code>fetch</code> promise with <code>null</code> rather than undefined. An object of <code>query</code>. constraints (e.g. <code>{where: {...}, orWhere: {...}}</code>may be passed to the query method (#30). Fix for empty eager relation responses not providing an empty model or collection instance on the <code>model.relations</code> object.</p>
<p><strong>0.1.9</strong> — <small><em>June 19, 2013</em></small>
 Resolve Model's <code>fetch</code> promise with <code>undefined</code> if no model was returned. An array of &quot;created at&quot; and &quot;updated at&quot; values may be used for <code>hasTimestamps</code>. Format is called on the <code>Model#fetch</code> method. Added an <code>exec</code> plugin to provide a node callback style interface for any of the promise methods.</p>
<p><strong>0.1.8</strong> — <small><em>June 18, 2013</em></small>
 Added support for polymorphic associations, with <code>morphOne</code>, <code>morphMany</code>, and <code>morphTo</code> model methods.</p>
<p><strong>0.1.7</strong> — <small><em>June 15, 2013</em></small>
 Bugfix where <code>detach</code> may be used with no parameters to detach all related items (#19).</p>
<p><strong>0.1.6</strong> — <small><em>June 15, 2013</em></small>
 Fixing bug allowing custom <code>idAttribute</code> values to be used in eager loaded many-to-many relations (#18).</p>
<p><strong>0.1.5</strong> — <small><em>June 11, 2013</em></small>
 Ensuring each of the <code>_previousAttribute</code> and <code>changed</code> values are properly reset on related models after sync actions.</p>
<p><strong>0.1.4</strong> — <small><em>June 10, 2013</em></small>
 Fixing issue with <code>idAttribute</code> not being assigned after database inserts. Removing various aliases <a href="#Events"><code>Events</code></a> methods for clarity.</p>
<p><strong>0.1.3</strong> — <small><em>June 10, 2013</em></small>
 Added <a href="#Model-instance-hasChanged"><code>Model#hasChanged</code></a>, <a href="#Model-instance-previous"><code>Model#previous</code></a>, and <a href="#Model-instance-previousAttributes"><code>Model#previousAttributes</code></a> methods, for getting the previous value of the model since the last sync. Using <code>Object.create(null)</code> for various internal model objects dealing with user values. Calling <a href="#Model-instance-related"><code>Model#related</code></a> on a model will now create an empty related object if one is not present on the <code>relations</code> object. Removed the <code>{patch: true}</code> option on save, instead only applying defaults if the object <code>isNew</code>, or if <code>{defaults: true}</code> is passed. Fix for <code>model.clone</code>'s relation responses.</p>
<p><strong>0.1.2</strong> — <small><em>May 17, 2013</em></small>
 Added <code>triggerThen</code> and <code>emitThen</code> for promise based events, used internally in the &quot;creating&quot;, &quot;updating&quot;, &quot;saving&quot;, and &quot;destroying&quot; events. Docs updates, fixing <code>{patch: true}</code> on <code>update</code> to have intended functionality. A model's <code>toJSON</code> is now correctly called on any related properties.</p>
<p><strong>0.1.1</strong> — <small><em>May 16, 2013</em></small>
 Fixed bug with eager loaded <code>belongsTo</code> relations (#14).</p>
<p><strong>0.1.0</strong> — <small><em>May 13, 2013</em></small>
 Initial Bookshelf release.</p>
  
</article>

    </section>






      </div>

      <footer>
        <div>
          Documentation generated by
          <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
          
            on
          March 28th 2018
        </div>
        <div>
          <a href="https://github.com/aral/fork-me-on-github-retina-ribbons">
            "Fork me on GitHub" ribbon
          </a>
          Copyright © 2013 Aral Balkan
        </div>
      </footer>
    </div>

    <script>prettyPrint();</script>
    <script src="docs/scripts/linenumber.js"></script>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.7.0/lodash.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/bluebird/2.9.24/bluebird.min.js"></script>
    <script src="docs/assets/knex.min.js"></script>
    <script src="build/bookshelf.js"></script>
    <script>
      var knex = Knex({client: 'websql'});
      var bookshelf = Bookshelf(knex);
    </script>

  </body>
</html>